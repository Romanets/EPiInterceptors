//>>built
define("epi/shell/widget/overlay/_Base",["epi","dojo","dijit","dojo/on","dojo/i18n","dojo/dom-geometry","dojo/dom-construct","dojo/dom-style","dojo/has","dijit/_Widget"],function(_1,_2,_3,on,_4,_5,_6,_7,_8,_9){return _2.declare("epi.shell.widget.overlay._Base",_9,{disabled:false,sourceItemNode:null,position:null,parent:null,adjustForMargins:true,onResize:function(){},destroy:function(){this.inherited(arguments);delete this.sourceItemNode;},refresh:function(){this._reset();this.resize();this.onResize();},resize:function(_a){_a=_a||this.get("position");this.updatePosition(_a);},updatePosition:function(_b){if(!this.canUpdatePosition()){return false;}_2.style(this.domNode,{left:_b.x+"px",top:_b.y+"px",width:_b.w+"px",height:_b.h+"px"});return false;},_getPositionAttr:function(){if(!this.canUpdatePosition()){return {x:0,y:0,w:0,h:0};}var _c=_5.position(this.sourceItemNode,false),_d=this._rawPosition,_e,_f,_10;if(_d){if(_8("ie")){_e=Math.abs((_d.x-_c.x))>1||Math.abs((_d.y-_c.y))>1||Math.abs((_d.w-_c.w))>1||Math.abs((_d.h-_c.h))>1;}else{_e=_d.x!==_c.x||_d.y!==_c.y||_d.w!==_c.w||_d.h!==_c.h;}if(!_e){this.position.isChanged=false;return this.position;}}this._rawPosition={x:_c.x,y:_c.y,w:_c.w,h:_c.h};if(this.adjustForMargins){_f=_7.getComputedStyle(this.sourceItemNode);if(_f){_10=_5.getMarginExtents(this.sourceItemNode,_f);if(_10.l<0){_c.x-=_10.l;_c.w+=_10.l;}if(_10.r<0){_c.w-=_10.r;}if(_10.t<0){_c.x-=_10.t;_c.h+=_10.t;}if(_10.b<0){_c.h-=_10.b;}}}_c.isChanged=true;this.set("position",_c);return _c;},_reset:function(){this._clearPosition();},_clearPosition:function(){this.position=this._rawPosition=null;},_setDisabledAttr:function(_11){this._set("disabled",_11);_2.style(this.domNode,{display:_11?"none":""});},_setSourceItemNodeAttr:function(_12){this._clearPosition();this._set("sourceItemNode",_12);},canUpdatePosition:function(){if(this.disabled){return false;}try{if(!this.sourceItemNode||!this.sourceItemNode.ownerDocument){return false;}}catch(ex){return false;}return true;}});});