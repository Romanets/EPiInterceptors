//>>built
define("epi/shell/Stateful",["dojo","epi","dojo/Stateful"],function(_1,_2,_3){return _1.declare("epi.shell.Stateful",_3,{_prefix:"epi-",initialData:null,constructor:function(_4){},postscript:function(){this.inherited(arguments);if(this.initialData){this.set(this.initialData);}},get:function(_5){return _1.getObject(this._prefix+_5,false,this);},set:function(_6,_7){if(typeof _6==="object"){for(var x in _6){this.set(x,_6[x]);}return this;}var _8=_1.getObject(this._prefix+_6,false,this);var _9=_7;_1.setObject(this._prefix+_6,_9,this);if(this._watchCallbacks){this._watchCallbacks(_6,_8,_9);this._callbackParentObjects(_6,_8,_9);this._callbackChildObjects(_6,_8,_9);}return this;},watch:function(_a,_b){var _c=this._watchCallbacks;if(!_c){var _d=this;_c=this._watchCallbacks=function(_e,_f,_10,_11){var _12=function(_13){if(_13){_13=_13.slice();for(var i=0,l=_13.length;i<l;i++){try{_13[i].call(_d,_e,_f,_10);}catch(e){console.error(e);}}}};_12(_c["_"+_e]);if(!_11){_12(_c["*"]);}};}if(!_b&&typeof _a==="function"){_b=_a;_a="*";}else{_a="_"+_a;}var _14=_c[_a];if(typeof _14!=="object"){_14=_c[_a]=[];}_14.push(_b);return {unwatch:function(){_14.splice(_1.indexOf(_14,_b),1);}};},_callbackChildObjects:function(_15,_16,_17){var _18;if(_1.isObject(_17)){for(_18 in _17){if(!_1.isFunction(_17[_18])){this._watchCallbacks(_15+"."+_18,_16?_16[_18]:null,_17[_18]);this._callbackChildObjects(_15+"."+_18,_16?_16[_18]:null,_17[_18]);}}}},_callbackParentObjects:function(_19,_1a,_1b){var _1c=_19.split(".");if(_1c.length==1){return;}var key=_1c.pop();_19=_1c.join(".");var _1d=this.get(_19);_1a=this._getUpdatedObject(_1d,key,_1a);_1b=_1d;this._watchCallbacks(_19,_1a,_1b);this._callbackParentObjects(_19,_1a,_1b);},_getUpdatedObject:function(_1e,key,_1f){var _20=_1.clone(_1e);_20[key]=_1f;return _20;}});});