//>>built
define("epi/shell/widget/dialog/Dialog",["epi","dojo","dojo/_base/array","dijit/focus","dojo/dom-class","dojo/dom-style","epi/shell/widget/dialog/_DialogBase","epi/shell/widget/_ActionConsumerWidget","epi/shell/widget/Toolbar"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _2.declare("epi.shell.widget.dialog.Dialog",[_7,_8],{confirmActionText:_1.resources.action.ok,cancelActionText:_1.resources.action.cancel,contentClass:"",dialogClass:"epi-dialog-landscape",defaultActionsVisible:true,setFocusOnConfirmButton:true,destroyOnHide:false,_validators:null,_okButtonName:"ok",_cancelButtonName:"cancel",postMixInProperties:function(){this.inherited(arguments);this._validators=[];if(this.content&&this.content.onSubmit){this.connect(this.content,"onSubmit",this._onSubmit);}},postCreate:function(){this.inherited(arguments);this.set("definitionConsumer",new _9({baseClass:"dijitDialogPaneActionBar"},this.actionContainerNode));},_size:function(){this.inherited(arguments);_3.forEach(["height","width"],function(_a){if(this[_a]==="auto"){this[_a]="";}},this.containerNode.style);},addValidator:function(_b){this._validators.push(_b);},getActions:function(){var _c=this.inherited(arguments);if(this.defaultActionsVisible){var _d={name:this._okButtonName,label:this.confirmActionText,title:null,settings:{type:"submit"}},_e={name:this._cancelButtonName,label:this.cancelActionText,title:null,action:_2.hitch(this,this._onCancel)};if(this.setFocusOnConfirmButton){_d.settings=_2.mixin({"class":"Salt"},_d.settings);}else{_e.settings={"class":"Salt"};}_c.push(_d,_e);}return _c;},show:function(){return this.inherited(arguments).then(_2.hitch(this,this._onAfterShow));},_onAfterShow:function(){if(this.defaultActionsVisible){this.set("focusedAction",this.setFocusOnConfirmButton?this._okButtonName:this._cancelButtonName);}},_onCancel:function(){this.onCancel();},_onSubmit:function(){if(!this.validate()){return;}if(this._validators.length===0){this.inherited(arguments);return;}var _f=_2.map(this._validators,function(_10){return _10();});var _11=arguments;var _12=new _2.DeferredList(_f);_12.then(_2.hitch(this,function(_13){if(_2.some(_13,function(_14){return !_14[0];})){return;}this.inherited(_11);}));},_setContentClassAttr:function(_15){_5.remove(this.containerNode,this.contentClass);this._set("contentClass",_15);_5.add(this.containerNode,this.contentClass);}});});