//>>built
define("epi/dnd/Target",["dojo"],function(_1){return _1.declare("epi.dnd.Target",null,{constructor:function(){this._dragStartSubscriptions=[];this._dragEndSubscriptions=[];},addDroppableZone:function(_2,_3){this._dragStartSubscriptions.push(_1.subscribe("/EPi/DnD/DragStart",_1.hitch(this,function(_4){_2._droppable=(_3===_4.type||_3=="EPiServer.FileManagementElement");this.onSourceDragStart(_2._droppable);})));this._dragEndSubscriptions.push(_1.subscribe("/EPi/DnD/DragEnd",_1.hitch(this,function(_5){if(_3===_5.type||_3=="EPiServer.FileManagementElement"){_2._droppable=false;}this.onSourceDragEnd(_3===_5.type);})));_1.connect(_2,"ondragenter",_1.hitch(this,function(e){this._onDragEnter(e,_2);}));_1.connect(_2,"ondragover",_1.hitch(this,function(e){this._onDragOver(e,_2);}));_1.connect(_2,"ondragleave",_1.hitch(this,function(e){this._onDragLeave(e,_2);}));_1.connect(_2,"ondrop",_1.hitch(this,function(e){this._onDrop(e,_2,_3);}));_1.connect(_2,"ondragend",_1.hitch(this,this._onDragEnd));},_onDragEnter:function(e,_6){if(_6._droppable){if(e.preventDefault){e.preventDefault();}this.onDragEnter(e,_6);return false;}},_onDragLeave:function(e,_7){this.onDragLeave(e,_7);},_onDragOver:function(e,_8){if(_8._droppable){if(e.preventDefault){e.preventDefault();}e.dataTransfer.dropEffect="link";this.onDragOver(e,_8);return false;}},_onDrop:function(e,_9,_a){try{dragData=_1.fromJson(e.dataTransfer.getData("Text"));}catch(ex){return;}if(dragData.type===_a){this.onDrop(e,_9,dragData.data);}if(e.preventDefault){e.preventDefault();}return false;},_onDragEnd:function(e){this.onDragEnd(e);},onDragEnter:function(e,_b){},onDragOver:function(e,_c){},onDragLeave:function(e,_d){},onDrop:function(e,_e,_f){},onSourceDragStart:function(_10){},onSourceDragEnd:function(_11){},onDragEnd:function(e){},destroy:function(){_1.forEach(this._dragStartSubscriptions,function(_12){_1.unsubscribe(_12);});delete this._dragStartSubscriptions;_1.forEach(this._dragEndSubscriptions,function(_13){_1.unsubscribe(_13);});delete this._dragEndSubscriptions;}});});