//>>built
require({cache:{"dojox/string/tokenize":function(){define("dojox/string/tokenize",["dojo/_base/lang","dojo/_base/sniff"],function(_1,_2){var _3=_1.getObject("dojox.string",true).tokenize;_3=function(_4,re,_5,_6){var _7=[];var _8,_9,_a=0;while(_8=re.exec(_4)){_9=_4.slice(_a,re.lastIndex-_8[0].length);if(_9.length){_7.push(_9);}if(_5){if(_2("opera")){var _b=_8.slice(0);while(_b.length<_8.length){_b.push(null);}_8=_b;}var _c=_5.apply(_6,_8.slice(1).concat(_7.length));if(typeof _c!="undefined"){_7.push(_c);}}_a=re.lastIndex;}_9=_4.slice(_a);if(_9.length){_7.push(_9);}return _7;};return _3;});},"epi/packaging/AntiForgeryData":function(){define("epi/packaging/AntiForgeryData",["dojo"],function(_d){return _d.declare("epi.packaging.AntiForgeryData",null,{_keyName:null,_keyValue:null,_antiForgeryToken:null,constructor:function(_e){var _f=_d.create("div");this._antiForgeryToken=_e;_f.innerHTML=this._antiForgeryToken;var _10=_d.query("input",_f)[0];this._keyName=_d.attr(_10,"name");this._keyValue=_d.attr(_10,"value");},GetKeyName:function(){return this._keyName;},GetKeyValue:function(){return this._keyValue;},GetTokenNode:function(){return this._antiForgeryToken;},AddAntiforgeryToken:function(_11){var _12={};_12[this._keyName]=this._keyValue;_d.mixin(_11,_12);return _11;}});});},"put-selector/put":function(){(function(_13){var _14,_15=/[-+,> ]/;_13([],_14=function(doc,_16){"use strict";_15=_16||_15;try{var _17=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,_18,doc=doc||document,_19=1;put("i",{name:"a"});}catch(e){_19=0;}function _1a(_1b,_1c){_1b.appendChild(doc.createTextNode(_1c));};function put(_1d){var _1e,_1f,_20,_21,_22,_23,_24=arguments;function _25(){if(_23&&_22&&_23!=_22){(_22==_1d&&(_1e||(_1e=_15.test(_26)&&doc.createDocumentFragment()))||_22).insertBefore(_23,_21||null);}};for(var i=0;i<_24.length;i++){var _26=_24[i];if(typeof _26=="object"){_20=false;if(_26 instanceof Array){_1f=doc.createDocumentFragment();for(var key=0;key<_26.length;key++){_1f.appendChild(put(_26[key]));}_26=_1f;}if(_26.nodeType){_23=_26;_25();_22=_26;_21=0;}else{for(var key in _26){_23[key]=_26[key];}}}else{if(_20){_20=false;_1a(_23,_26);}else{if(i<1){_1d=null;}_20=true;var _27=_26.replace(_17,function(t,_28,_29,_2a,_2b,_2c){if(_28){_25();if(_28=="-"||_28=="+"){_22=(_21=(_23||_22)).parentNode;_23=null;if(_28=="+"){_21=_21.nextSibling;}}else{if(_28=="<"){_22=_23=(_23||_22).parentNode;}else{if(_28==","){_22=_1d;}else{if(_23){_22=_23;}}_23=null;}_21=0;}if(_23){_22=_23;}}var tag=!_29&&_2a;if(tag||(!_23&&(_29||_2b))){if(tag=="$"){_1a(_22,_24[++i]);}else{tag=tag||put.defaultTag;var _2d=_19&&_24[i+1]&&_24[i+1].name;if(_2d){tag="<"+tag+" name=\""+_2d+"\">";}_23=doc.createElement(tag);}}if(_29){if(_2a=="$"){_2a=_24[++i];}if(_29=="#"){_23.id=_2a;}else{var _2e=_23.className;var _2f=_2e&&(" "+_2e+" ").replace(" "+_2a+" "," ");if(_29=="."){_23.className=_2e?(_2f+_2a).substring(1):_2a;}else{if(_26=="!"){put("div",_23,"<").innerHTML="";}else{_2f=_2f.substring(1,_2f.length-1);if(_2f!=_2e){_23.className=_2f;}}}}}if(_2b){if(_2c=="$"){_2c=_24[++i];}if(_2b=="style"){_23.style.cssText=_2c;}else{_23[_2b.charAt(0)=="!"?(_2b=_2b.substring(1))&&"removeAttribute":"setAttribute"](_2b,_2c===""?_2b:_2c);}}return "";});if(_27){throw new SyntaxError("Unexpected char "+_27+" in "+_26);}_25();_22=_1f=_23||_22;}}}if(_1d&&_1e){_1d.appendChild(_1e);}return _1f;};put.defaultTag="div";put.forDocument=_14;return put;});})(typeof define=="undefined"?function(_30,_31){if(typeof window=="undefined"){require("./node-html")(module,_31);}else{put=_31();}}:define);},"epi/packaging/StatusMessageList":function(){define("epi/packaging/StatusMessageList",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","epi"],function(_32,_33,_34,_35,epi){return _32.declare("epi.packaging.StatusMessageList",[_34,_35],{templateString:"<div><ul data-dojo-attach-point=\"_errorList\"></ul></div>",messages:[],render:function(){_32.empty(this._errorList);if(this.messages.length>0){_32.forEach(this.messages,function(_36){var li=_32.create("li");li.innerHTML=_36;this._errorList.appendChild(li);},this);_32.style(this.domNode,"display","block");}else{_32.style(this.domNode,"display","none");}},addMessages:function(_37){for(i in _37){this.messages.push(_37[i]);}this.render();},clearMessages:function(){this.messages=[];this.render();}});});},"epi/packaging/ModulesList":function(){define("epi/packaging/ModulesList",["dojo","dijit","dojo/cookie","dijit/_Widget","dijit/_TemplatedMixin","dojox/widget/Standby","epi/packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModulesList"],function(_38,_39,_3a,_3b,_3c,_3d,_3e,res){return _38.declare("epi.packaging.ModulesList",[_3b,_3c],{res:res,antiForgeryData:null,templateString:"<div class=\"epi-listingContainer\"><ul data-dojo-attach-point=\"_modulesListPlaceholder\" class=\"epi-advancedListing\"></ul></div>",listItemTemplateString:null,listingUrl:null,feedName:null,hideModuleInListOnAction:false,emptyListMessage:"No add-on found.",_dataStore:null,_listItems:null,_standbyWigdet:null,startup:function(){if(this._started){return;}this._standbyWigdet=this._createStandbyWidget();document.body.appendChild(this._standbyWigdet.domNode);this._standbyWigdet.startup();this.inherited(arguments);},_createStandbyWidget:function(){return new dojox.widget.Standby({target:this._modulesListPlaceholder});},destroy:function(){this._standbyWigdet.destroyRecursive(false);this.inherited(arguments);},updateView:function(){this._listModules(true);},onSiteRestartRequired:function(){},onError:function(_3f){},onSuccess:function(_40){},onModuleActionPerformed:function(){},_listModules:function(_41){if(this.listingUrl==""){return;}if(!this._dataStore||_41){var _42={feedName:this.feedName};this.antiForgeryData.AddAntiforgeryToken(_42);this._standbyWigdet.show();_38.xhrPost({content:_42,url:this.listingUrl,handleAs:"json",load:_38.hitch(this,function(_43,_44){if(!_43){return;}else{if(_43.errors&&_43.errors.length>0){this._showErrors(_43.errors);}this._dataStore=new _38.store.Memory({data:_43.modules});this._buildModuleList();}}),error:_38.hitch(this,function(_45,_46){var _47=_38.replace(this.res.addonlistreaderror,{error:_45});this._showErrors([_47]);_38.publish("onServerError",[_46]);}),handle:_38.hitch(this,function(_48,_49){this._standbyWigdet.hide();})});}else{this._buildModuleList();}},_buildModuleList:function(){var _4a=this._dataStore.query({},{sort:[{attribute:"title",descending:false},{attribute:"versionMajor",descending:true},{attribute:"versionMinor",descending:true},{attribute:"versionBuild",descending:true},{attribute:"versionRevision",descending:true},{attribute:"versionSpecial",descending:false}]});this._renderModules(_4a);},_createModuleSummary:function(_4b,_4c){var li=_38.create("li",{"class":"clearfix"},_4c);var div=_38.create("div",{},li);return new _3e(_4b,div);},_renderModules:function(_4d){_38.empty(this._modulesListPlaceholder);this._destroyModuleList();if(_4d.length==0){this._showEmptyListMessage();return;}_38.forEach(_4d,function(_4e,i){var _4f={module:_4e,antiForgeryData:this.antiForgeryData,itemIndex:i};if(this.listItemTemplateString){_4f.templateString=this.listItemTemplateString;}var _50=this._createModuleSummary(_4f,this._modulesListPlaceholder);_50.startup();this._connectModuleSummaryEvents(_50);},this);},_connectModuleSummaryEvents:function(_51){var _52=this.connect(_51,"onInstall",function(_53){this._onModuleAction(_53);var _54=_38.replace(this.res.installsuccess,_53.module);this.onSuccess([_54]);this._ensureReload();});var _55=this.connect(_51,"onUninstall",function(_56){this._onModuleAction(_56);var _57=_38.replace(this.res.uninstallsuccess,_56.module);this.onSuccess([_57]);this._ensureReload();});var _58=this.connect(_51,"onUpdate",function(_59){this._onModuleAction(_59);var _5a=_38.replace(this.res.updatesuccess,_59.module);this.onSuccess([_5a]);this._ensureReload();});var _5b=this.connect(_51,"onInstallError",function(_5c){this.onModuleActionPerformed();var _5d=this._getErrorMessages(this.res.installationerror,_5c.module);this._showErrors(_5d);});var _5e=this.connect(_51,"onUninstallError",function(_5f){this.onModuleActionPerformed();var _60=this._getErrorMessages(this.res.uninstallationerror,_5f.module);this._showErrors(_60);});var _61=this.connect(_51,"onUpdateError",function(_62){this.onModuleActionPerformed();var _63=this._getErrorMessages(this.res.updateerror,_62.module);this._showErrors(_63);});var _64={widget:_51,handlers:[_52,_55,_58,_5b,_5e,_61]};this._listItems.push(_64);},_getErrorMessages:function(_65,_66){var _67=[_38.replace(_65,_66)];if(_66.errors&&_66.errors.length){_67=_67.concat(_66.errors);}return _67;},_ensureReload:function(){_38.publish("onReloadRequired");},_onModuleAction:function(_68){if(this.hideModuleInListOnAction){this._removeModuleFromList(_68);}this.onSiteRestartRequired();this.updateView();this.onModuleActionPerformed();},_removeModuleFromList:function(_69){var _6a=_38.filter(this._listItems,function(_6b){return _6b.widget==_69;});_38.forEach(_6a,function(_6c,i){var _6d=_6c.widget.domNode.parentNode;this._destroyListItem(_6c);var _6e=_38.indexOf(this._listItems,_6c);if(_6e>-1){this._listItems.splice(_6e,1);}_38.destroy(_6d);},this);if(this._listItems.length==0){this._showEmptyListMessage();}},_destroyModuleList:function(){_38.forEach(this._listItems,function(_6f,i){this._destroyListItem(_6f);},this);this._listItems=[];},_destroyListItem:function(_70){_38.forEach(_70.handlers,function(_71){this.disconnect(_71);},this);_70.widget.destroyRecursive(false);},_showErrors:function(_72){this.onError(_72);},_showEmptyListMessage:function(){var li=_38.create("li",{},this._modulesListPlaceholder);var div=_38.create("div",{innerHTML:"<span>"+this.emptyListMessage+"</span>"},li);_38.addClass(div,"emptyListMessageContainer");}});});},"url:epi/packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" dojoType=\"dijit.form.Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" dojoType=\"dijit.form.Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n","epi/packaging/SiteRestartWarning":function(){define("epi/packaging/SiteRestartWarning",["dojo","dijit","epi/dependency","dijit/_Widget","dijit/_TemplatedMixin","dojo/text!./templates/SiteRestartWarning.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SiteRestartWarning"],function(_73,_74,_75,_76,_77,_78,res){return _73.declare("epi.packaging.SiteRestartWarning",[_76,_77],{res:res,helpUrl:null,templateString:_78,postMixInProperties:function(){var _79=_75.resolve("epi.ModuleManager");var _7a=_79.getModule("Shell");this.helpUrl=_7a.helpPath+"#addons";this.inherited(arguments);}});});},"epi/packaging/UpdateableSection":function(){require({cache:{"url:epi/packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi/packaging/UpdateableSection",["dojo","dijit","epi/routes","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi/packaging/SectionHeader","epi/packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UpdateableSection"],function(_7b,_7c,_7d,_7e,_7f,_80,_81,_82,res){return _7b.declare("epi.packaging.UpdateableSection",[_7e,_7f],{res:res,templateString:_82,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _80({webHelpAlias:"updateableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _81({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:true,emptyListMessage:this.res.emptylistmessage,listingUrl:_7d.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetUpdateableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_83){this._headerWidget.addErrorMessages(_83);});this.connect(this._listWidget,"onSuccess",function(_84){this._headerWidget.addSuccessMessages(_84);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"url:epi/packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit.DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit.MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit.MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>","epi/packaging/DependenciesGrid":function(){define("epi/packaging/DependenciesGrid",["dojo","dojo/store/Memory","dojo/data/ObjectStore","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/grid/DataGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView.Tab.Dependencies"],function(_85,_86,_87,_88,_89,_8a,_8b,res){return _85.declare("epi.packaging.DependenciesGrid",[_88,_89,_8a],{res:res,data:null,templateString:"<div>                            <table data-dojo-type=\"dojox.grid.DataGrid\" data-dojo-attach-point=\"grid\" autoHeight=\"100\">                                <thead>                                    <tr>                                        <th field=\"name\" width=\"50%\">${res.name}</th>                                        <th field=\"version\" width=\"20%\">${res.version}</th>                                        <th field=\"releasedby\" width=\"*\">${res.releasedby}</th>                                    </tr>                                </thead>                            </table>                        </div>",startup:function(){if(this._started){return;}this.inherited(arguments);if(this.data&&this.data.length>0){var _8c=new _86({data:this.data});this.grid.setStore(new _87({objectStore:_8c}));}else{_85.style(this.grid.domNode,{display:"none"});}},restore:function(){this.resize();},resize:function(){this.inherited(arguments);this.grid.sizeChange();}});});},"url:epi/packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>","url:epi/packaging/templates/SectionHeader.htm":"<div style=\"overflow: auto;\">\r\n    <div class=\"epi-listingTopContainer\" data-dojo-attach-point=\"selectTypeNode\">\r\n        <h1 data-dojo-attach-point=\"_titleNode\">\r\n            ${sectionTitle}</h1>\r\n        <div data-dojo-attach-point=\"_descriptionNode\">\r\n            ${description}</div>\r\n        <div data-dojo-attach-point=\"_restartPlaceholder\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_successMessageList\" data-dojo-type=\"epi.packaging.StatusMessageList\"\r\n            class=\"epi-packaging-validationSummary epi-packaging-Note\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_errorMessageList\" data-dojo-type=\"epi.packaging.StatusMessageList\"\r\n            class=\"epi-errorText epi-packaging-validationSummary epi-packaging-Error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-success\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","dojox/dtl/_Templated":function(){define("dojox/dtl/_Templated",["dojo/_base/declare","./_base","dijit/_TemplatedMixin","dojo/dom-construct","dojo/cache","dojo/_base/array","dojo/string","dojo/parser","dijit/_base/manager"],function(_8d,dd,_8e,_8f,_90,_91,_92,_93,_94){return _8d("dojox.dtl._Templated",_8e,{_dijitTemplateCompat:false,buildRendering:function(){var _95;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dd.Template){this._template=t;}else{_95=t;}}if(!_95){var _96=new dd._Context(this);if(!this._created){delete _96._getter;}var _97=_8f.toDom(this._template.render(_96));if(_97.nodeType!==1&&_97.nodeType!==3){for(var i=0,l=_97.childNodes.length;i<l;++i){_95=_97.childNodes[i];if(_95.nodeType==1){break;}}}else{_95=_97;}}this._attachTemplateNodes(_95,function(n,p){return n.getAttribute(p);});if(this.widgetsInTemplate){var _98=_93,qry,_99;if(_98._query!="[dojoType]"){qry=_98._query;_99=_98._attrName;_98._query="[dojoType]";_98._attrName="dojoType";}var cw=(this._startupWidgets=_93.parse(_95,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_98._query=qry;_98._attrName=_99;}this._supportingWidgets=_94.findWidgets(_95);this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){_8f.place(_95,this.domNode,"before");this.destroyDescendants();_8f.destroy(this.domNode);}this.domNode=_95;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_9a,_9b,_9c){var _9d=this._templateCache;var key=_9b||_9a;if(_9d[key]){return _9d[key];}_9b=_92.trim(_9b||_90(_9a,{sanitize:true}));if(this._dijitTemplateCompat&&(_9c||_9b.match(/\$\{([^\}]+)\}/g))){_9b=this._stringRepl(_9b);}if(_9c||!_9b.match(/\{[{%]([^\}]+)[%}]\}/g)){return _9d[key]=_8f.toDom(_9b);}else{return _9d[key]=new dd.Template(_9b);}},render:function(){this.buildRendering();},startup:function(){_91.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"url:epi/packaging/templates/UploadResults.htm":"<div>\r\n    <div class=\"epi-paddingVertical-small\">\r\n        <table class=\"epi-default\" dojoAttachPoint=\"installedTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        ${res.headerindex}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerfile}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersize}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerid}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headertitle}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersummary}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerdescription}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerstatus}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            {% for uploadedFile in files %}\r\n            <tr>\r\n                <td>\r\n                    {{ uploadedFile.index }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageFileName|safe }}\r\n                </td>\r\n                <td class=\"sizeColumn\">\r\n                    {{ uploadedFile.sizeStr }}\r\n                </td>\r\n\r\n                {% if uploadedFile.packageInfo.isInstalled %}\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.id|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.title|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.summary|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.description|safe }}\r\n                </td>\r\n                <td class=\"installedIcon\">\r\n                </td>\r\n                {% else %}\r\n                <td colspan=\"4\">\r\n                    <span class=\"error\">\r\n                        <ul>\r\n                            {% for error in uploadedFile.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n\r\n                        <ul>\r\n                            {% for error in uploadedFile.packageInfo.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n                    </span>\r\n                </td>\r\n                <td class=\"failureIcon\">\r\n                </td>\r\n                {% endif %}\r\n            </tr>\r\n            {% endfor %}\r\n        </table>\r\n    </div>\r\n</div>\r\n","url:epi/packaging/templates/SiteRestartWarning.htm":"<div class=\"epi-addonsRestartWarningContainer dijitInline\">\r\n    <span class=\"epi-addonsRestartWarningMessage\">${res.message} <a class=\"epi-visibleLink\" href=\"${helpUrl}\" onclick=\"var popupWin=window.open('${helpUrl}','Shell','width=840, height=500, resizable=1');popupWin.focus(); return false;\">${res.learnmorelabel}</a></span>\r\n</div>","epi/packaging/UploadSection":function(){require({cache:{"url:epi/packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi/packaging/UploadSection",["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi/packaging/SectionHeader","epi/packaging/PackageUpload","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(_9e,_9f,_a0,_a1,_a2,_a3,_a4,res){return _9e.declare("epi.packaging.UploadSection",[_a0,_a1],{res:res,templateString:_a4,antiForgeryData:null,_headerWidget:null,_uploadWidget:null,_packageUpload:null,startup:function(){if(this._started){return;}this._headerWidget=new _a2({webHelpAlias:"uploadaddon",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.uploadtitle},this._headerPlaceholder);this._headerWidget.startup();this._packageUpload=new _a3({antiForgeryData:this.antiForgeryData},this._contentPlaceholder);this._packageUpload.startup();this.connect(this._packageUpload,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._packageUpload,"onError",function(_a5){this._headerWidget.addErrorMessages(_a5);});this.connect(this._packageUpload,"onSuccess",function(_a6){this._headerWidget.addSuccessMessages(_a6);});this.connect(this._packageUpload,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._packageUpload.updateView();this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();}});});},"epi/packaging/GallerySection":function(){require({cache:{"url:epi/packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi/packaging/GallerySection",["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi/routes","epi/packaging/SectionHeader","epi/packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.GallerySection","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(_a7,_a8,_a9,_aa,_ab,_ac,_ad,_ae,res,_af){return _a7.declare("epi.packaging.GallerySection",[_a9,_aa],{res:res,resFeeds:_af,templateString:_ae,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _ac({webHelpAlias:"availableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _ad({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:false,emptyListMessage:this.res.emptylistmessage,listingUrl:_ab.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstallableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_b0){this._headerWidget.addErrorMessages(_b0);});this.connect(this._listWidget,"onSuccess",function(_b1){this._headerWidget.addSuccessMessages(_b1);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(_b2){var _b3=this.resFeeds[_b2.feedName.toLowerCase()];this._headerWidget.sectionTitle=_b3?_b3.title:_b2.feedName;this._headerWidget.description=_b3?_b3.description:"";this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.feedName=_b2.feedName;this._listWidget.updateView();}});});},"epi/packaging/PackagesGrid":function(){define("epi/packaging/PackagesGrid",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom-construct","dojo/on","dojox/widget/Standby","dgrid/Keyboard","dgrid/OnDemandGrid","dgrid/Selection","epi","epi/datetime","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi/packaging/ModulesList","epi/packaging/DetailedView","epi/packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_b4,_b5,_b6,_b7,_b8,on,_b9,_ba,_bb,_bc,epi,_bd,_be,_bf,_c0,_c1,_c2,_c3,_c4){return _b5("epi.packaging.PackagesGrid",[_c0],{templateString:"<div></div>",_createStandbyWidget:function(){return new _b9({target:this.domNode});},buildRendering:function(){this.inherited(arguments);var _c5={titleWithVersion:{className:"epi-packaging-name",label:epi.resources.header.name,renderCell:_b7.hitch(this,function(_c6,_c7,_c8){if(_c7){var _c9=_b8.create("a",{"class":"epi-packaging-namelink",href:"#details",innerHTML:_c7});on(_c9,"click",_b7.hitch(this,function(evt){_b6.stop(evt);this._openDetails(_c6);}));_b8.place(_c9,_c8);}})},description:{className:"epi-packaging-description",label:epi.resources.header.description},tags:{className:"epi-packaging-tags",label:_c3.tags,renderCell:function(_ca,_cb,_cc){_b4.forEach(_cb,function(tag){_b8.create("span",{"class":"epi-valueItem",innerHTML:tag},_cc);});}},installDate:{className:"epi-packaging-installedDate",label:_c3.installdate,formatter:function(_cd){return _bd.toUserFriendlyString(_cd);}},installedBy:{className:"epi-packaging-installedBy",label:_c3.installby},_item:{className:"epi-packaging-indicators",label:" ",sortable:false,renderCell:function(_ce,_cf,_d0){if(_ce.isSystem){_b8.create("span",{"class":"epi-packaging-systemIndicator",innerHTML:_c3.systemlabel},_d0);}if(_ce.isUpdateAvailable){_b8.create("a",{"class":"epi-packaging-updateslink",href:"#updates",innerHTML:_c3.updatelink},_d0);}}}};this.grid=new (_b5([_bb,_bc,_ba]))({columns:_c5,selectionMode:"single",sort:[{attribute:"titleWithVersion",descending:false}],store:this._dataStore},this.domNode);},_buildModuleList:function(){this._renderModules(this._dataStore);},_renderModules:function(_d1){this._listItems=[];_b4.forEach(_d1.data,function(_d2){var _d3={module:_d2,antiForgeryData:this.antiForgeryData,_moduleStandby:this._standbyWigdet,_setButtonVisibility:function(){}};_d2.moduleSummary=new _c2(_d3,null);this._connectModuleSummaryEvents(_d2.moduleSummary);},this);this.grid.set("store",_d1);},_openDetails:function(_d4){var _d5=this;var _d6=new _bf({content:new _c1({currentPackage:_d4,installHandler:_b7.hitch(_d6,function(){_d5._showConfirmationDialog(_d4,_c4.installconfirmation,_b7.hitch(_d6,function(_d7){if(_d7){this.hide();_d4.moduleSummary._installModule();}}));}),updateHandler:_b7.hitch(_d6,function(){_d5._showConfirmationDialog(_d4,_c4.updateconfirmation,_b7.hitch(_d6,function(_d8){if(_d8){this.hide();_d4.moduleSummary._updateModule();}}));}),unInstallHandler:_b7.hitch(_d6,function(){_d5._showConfirmationDialog(_d4,_c4.uninstallconfirmation,_b7.hitch(_d6,function(_d9){if(_d9){this.hide();_d4.moduleSummary._uninstallModule();}}));}),closeHandler:_b7.hitch(_d6,function(){_d6.hide();})}),title:_d4.title,destroyOnHide:true,defaultActionsVisible:false});_d6.show();},_showConfirmationDialog:function(_da,_db,_dc){var _dd=new _be({description:_b7.replace(_db,{name:_da.title,version:_da.version}),title:_c4.confirmationdialogtitle,onAction:_dc});_dd.show();}});});},"xstyle/has-class":function(){define("xstyle/has-class",["dojo/has"],function(has){var _de={};return function(){var _df,_e0=arguments;for(var i=0;i<_e0.length;i++){var _df=_e0[i];if(!_de[_df]){_de[_df]=true;var _e1=_df.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),_e2=has(_e1[2]),_e3=-_e1[4];if((_e3>0?_e3<=_e2&&(-_e1[5]||_e3)>=_e2:!!_e2)==!_e1[1]){document.documentElement.className+=" has-"+_df;}}}};});},"epi/packaging/RestartSite":function(){require({cache:{"url:epi/packaging/templates/RestartSite.htm":"<div style=\"display: none;\" class=\"restartContainer\">\r\n    <span>${res.restartrequiredmessage}</span>\r\n    <input type=\"button\" dojoAttachPoint=\"restartButton\" dojoType=\"dijit.form.Button\" label=\"${res.restartbuttonlabel}\"/>\r\n</div>"}});define("epi/packaging/RestartSite",["dojo","dijit","epi/routes","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","dojo/text!./templates/RestartSite.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.RestartSite"],function(_e4,_e5,_e6,_e7,_e8,_e9,_ea,_eb,res){return _e4.declare("epi.packaging.RestartSite",[_e7,_e8,_e9],{res:res,templateString:_eb,pingTimeout:5000,restartUrl:null,checkStatusUrl:null,antiForgeryData:null,_restartStandby:null,constructor:function(){if(_e6){this.restartUrl=_e6.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Restart"});this.checkStatusUrl=_e6.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"CheckRestartRequired"});}},postMixInProperties:function(){if(!this.restartUrl){console.error("restartUrl is not specified");}if(!this.checkStatusUrl){console.error("checkStatusUrl is not specified");}this.inherited(arguments);},startup:function(){_e4.connect(this.restartButton,"onClick",this,function(){this._requestRestart();});this.inherited(arguments);},hide:function(){_e4.style(this.domNode,"display","none");},show:function(){_e4.style(this.domNode,"display","block");},showIfRestartRequired:function(){var _ec={};this.antiForgeryData.AddAntiforgeryToken(_ec);_e4.xhrPost({content:_ec,url:this.checkStatusUrl,handleAs:"json",load:_e4.hitch(this,function(_ed){if(!_ed){return;}else{if(_ed.restartRequired==true){this.show();}else{this.hide();}this.onRestartCheckComplete(_ed.restartRequired==true);}}),error:_e4.hitch(this,function(err,_ee){_e4.publish("onServerError",[_ee]);this.hide();})});},onRestartFinished:function(){},onRestartCheckComplete:function(_ef){},_requestRestart:function(){if(!this._restartStandby){this._restartStandby=new _ea({target:this.domNode});document.body.appendChild(this._restartStandby.domNode);this._restartStandby.startup();}this._restartStandby.show();var _f0={};this.antiForgeryData.AddAntiforgeryToken(_f0);_e4.xhrPost({content:_f0,url:this.restartUrl,handleAs:"json",load:_e4.hitch(this,function(_f1,_f2){if(_f1.restartRequired){this.counter=0;this._ping();}else{this._restartStandby.hide();alert(this.res.restartfailedmessage);}}),error:_e4.hitch(this,function(err,_f3){this._restartStandby.hide();_e4.publish("onServerError",[_f3]);}),handle:function(){}});},_ping:function(){this.counter++;if(this.counter>100){this._restartStandby.hide();return;}setTimeout(_e4.hitch(this,function(){var _f4={};this.antiForgeryData.AddAntiforgeryToken(_f4);_e4.xhrPost({content:_f4,url:this.checkStatusUrl,handleAs:"json",load:_e4.hitch(this,function(_f5,_f6){if(_f5.restartRequired==true){this._ping();}else{this._restartStandby.hide();this.hide();this.onRestartFinished();}}),error:_e4.hitch(this,function(err,_f7){if(_f7.xhr.status==500){this._restartStandby.hide();_e4.publish("onServerError",[_f7]);}else{this._ping();}})});}),this.pingTimeout);}});});},"epi/packaging/SelectedFiles":function(){require({cache:{"url:epi/packaging/templates/SelectedFiles.htm":"<div class=\"dojoxUploaderFileList\" data-dojo-attach-point=\"listContainer\" style=\"display:none\">\r\n    <span>${res.fileslisttitle}</span>\r\n    <div data-dojo-attach-point=\"sizeHeader\" style=\"display:none;\"></div>\r\n    <table class=\"dojoxUploaderFileListTable epi-default\" data-dojo-attach-point=\"listTable\">\r\n        <thead>\r\n            <tr class=\"dojoxUploaderFileListHeader\">\r\n                <th class=\"dojoxUploaderIndex\">\r\n                    ${res.headerindex}\r\n                </th>\r\n                <th class=\"dojoxUploaderIcon\">\r\n                    ${res.headertype}\r\n                </th>\r\n                <th class=\"dojoxUploaderFileName\">\r\n                    ${res.headerfile}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-dojo-attach-point=\"listNode\"></tbody>\r\n    </table>\r\n</div>\r\n"}});define("epi/packaging/SelectedFiles",["dojo","dijit","dojox/form/uploader/FileList","dojo/text!./templates/SelectedFiles.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SelectedFiles"],function(_f8,_f9,_fa,_fb,res){return _f8.declare("epi.packaging.SelectedFiles",_fa,{res:res,templateString:_fb,hideProgress:function(){},showProgress:function(){},reset:function(){this.inherited(arguments);this._changeListVisibility();},_progress:function(_fc){},_onUploaderChange:function(_fd){this.inherited(arguments);this._changeListVisibility();},_changeListVisibility:function(){if(this.rowAmt==0){_f8.style(this.listContainer,"display","none");}else{_f8.style(this.listContainer,"display","block");}},_addRow:function(_fe,_ff,name){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);_f8.addClass(c,"dojoxUploaderIndex");c.innerHTML=_fe;c=r.insertCell(-1);_f8.addClass(c,"dojoxUploaderIcon");c.innerHTML=_ff;c=r.insertCell(-1);_f8.addClass(c,"dojoxUploaderFileName");c.innerHTML=name;this.rowAmt++;}});});},"url:epi/packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit.layout.TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dependenciesTabContainer\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi.packaging.DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>","dgrid/Grid":function(){define("dgrid/Grid",["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","dojo/_base/sniff"],function(_100,_101,_102,has,put,List){var _103=has("ie")<8&&!has("quirks");var _104=/[^\._a-zA-Z0-9-]/g;function _105(_106,_107){if(_107&&_107.nodeType){_106.appendChild(_107);}};var Grid=_101([List],{columns:null,cellNavigation:true,tabableHeader:true,showHeader:true,column:function(_108){if(typeof _108=="string"){return this.columns[_108];}else{return this.cell(_108).column;}},listType:"grid",cell:function(_109,_10a){if(_109.row&&_109.row instanceof this._Row){return _109;}if(_109.target&&_109.target.nodeType){_109=_109.target;}var _10b;if(_109.nodeType){var _10c;do{if(this._rowIdToObject[_109.id]){break;}var _10d=_109.columnId;if(_10d){_10a=_10d;_10b=_109;break;}_109=_109.parentNode;}while(_109&&_109!=this.domNode);}if(!_10b&&_10a){var row=this.row(_109),_10e=row.element;if(_10e){var _10f=_10e.getElementsByTagName("td");for(var i=0;i<_10f.length;i++){if(_10f[i].columnId==_10a){_10b=_10f[i];break;}}}}if(_109!=null){return {row:row||this.row(_109),column:_10a&&this.column(_10a),element:_10b};}},_columnsCss:function(rule){rule.fullSelector=function(){return this.parent.fullSelector()+" .dgrid-cell";};for(var i=0;i<rule.children.length;i++){var _110=rule.children[i];_110.field=_110.className=_110.selector.substring(1);}return rule.children;},createRowCells:function(tag,each,_111){var row=put("table.dgrid-row-table[role=presentation]"),_112=this.cellNavigation,_113=(has("ie")<9||has("quirks"))?put(row,"tbody"):row,tr,si,sl,i,l,_114,_115,id,_116,cell,_117,_118,_119;_111=_111||this.subRows;for(si=0,sl=_111.length;si<sl;si++){_114=_111[si];tr=(sl==1&&!has("ie"))?_113:put(_113,"tr");for(i=0,l=_114.length;i<l;i++){_115=_114[i];id=_115.id;_116=_115.className||(_115.field&&"field-"+_115.field);cell=put(tag+(".dgrid-cell.dgrid-cell-padding.dgrid-column-"+id+(_116?"."+_116:"")).replace(_104,"-"));cell.columnId=id;if(_103){_117=put(cell,"!dgrid-cell-padding div.dgrid-cell-padding");cell.contents=_117;}else{_117=cell;}_118=_115.colSpan;if(_118){cell.colSpan=_118;}_119=_115.rowSpan;if(_119){cell.rowSpan=_119;}each(_117,_115);tr.appendChild(cell);}}return row;},left:function(cell,_11a){return this.cell(this._move(cell,-(_11a||1),"dgrid-cell"));},right:function(cell,_11b){return this.cell(this._move(cell,_11b||1,"dgrid-cell"));},renderRow:function(_11c,_11d){var row=this.createRowCells("td",function(td,_11e){var data=_11c;if(_11e.get){data=_11e.get(_11c);}else{if("field" in _11e&&_11e.field!="_item"){data=data[_11e.field];}}if(_11e.formatter){td.innerHTML=_11e.formatter(data);}else{if(_11e.renderCell){_105(td,_11e.renderCell(_11c,data,td,_11d));}else{if(data!=null){td.appendChild(document.createTextNode(data));}}}},_11d&&_11d.subRows);return put("div[role=gridcell]>",row);},renderHeader:function(){var grid=this,_11f=this.columns,_120=this.headerNode,i=_120.childNodes.length;while(i--){put(_120.childNodes[i],"!");}var row=this.createRowCells("th[role=columnheader]",function(th,_121){var _122=_121.headerNode=th;if(_103){th=th.parentNode;}var _123=_121.field;if(_123){th.field=_123;}if(_121.renderHeaderCell){_105(_122,_121.renderHeaderCell(_122));}else{if(_121.label||_121.field){_122.appendChild(document.createTextNode(_121.label||_121.field));}}if(_121.sortable!==false&&_123&&_123!="_item"){th.sortable=true;th.className+=" dgrid-sortable";}});this._rowIdToObject[row.id=this.id+"-header"]=this.columns;_120.appendChild(row);_102(row,"click,keydown",function(_124){if(_124.type=="click"||_124.keyCode==32){var _125=_124.target,_126,_127,_128,sort;do{if(_125.sortable){grid._sortNode=_125;_126=_125.field||_125.columnId;_127=(sort=grid._sort[0])&&sort.attribute==_126&&!sort.descending;return grid.set("sort",_126,_127);}}while((_125=_125.parentNode)&&_125!=_120);}});},resize:function(){var _129=this.headerNode.firstChild,_12a=this.contentNode,_12b;this.inherited(arguments);if(!has("ie")||(has("ie")>7&&!has("quirks"))){_12a.style.width="";if(_12a&&_129){if((_12b=_129.offsetWidth)!=_12a.offsetWidth){_12a.style.width=_12b+"px";}}}},destroy:function(){this._destroyColumns();this.inherited(arguments);},_setSort:function(_12c,_12d){this.inherited(arguments);if(this._lastSortedArrow){put(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down");put(this._lastSortedArrow,"!");delete this._lastSortedArrow;}if(!this._sort[0]){return;}var prop=this._sort[0].attribute,desc=this._sort[0].descending,_12e=this._sortNode,_12f,_130,i;delete this._sortNode;if(!_12e){_12f=this.columns;for(i in _12f){_130=_12f[i];if(_130.field==prop){_12e=_130.headerNode;break;}}}if(_12e){_12e=_12e.contents||_12e;this._lastSortedArrow=put(_12e.firstChild,"-div.dgrid-sort-arrow.ui-icon[role=presentation]");this._lastSortedArrow.innerHTML="&nbsp;";put(_12e,desc?".dgrid-sort-down":".dgrid-sort-up");this.resize();}},styleColumn:function(_131,css){return this.addCssRule("#"+this.domNode.id+" .dgrid-column-"+_131,css);},_configColumns:function(_132,_133){var _134=[],_135=_133 instanceof Array,_136,_137;for(_136 in _133){_137=_133[_136];if(typeof _137=="string"){_133[_136]=_137={label:_137};}if(!_135&&!_137.field){_137.field=_136;}_136=_137.id=_137.id||(isNaN(_136)?_136:(_132+_136));if(_132){this.columns[_136]=_137;}if(this._configColumn){this._configColumn(_137,_136,_133,_132);}_137.grid=this;if(typeof _137.init==="function"){_137.init();}_134.push(_137);}return _135?_133:_134;},_destroyColumns:function(){var _138=this.subRows.length,i,j,_139;this.cleanup();for(i=0;i<_138;i++){for(j=0,len=this.subRows[i].length;j<len;j++){_139=this.subRows[i][j];if(typeof _139.destroy==="function"){_139.destroy();}}}},configStructure:function(){var _13a=this.subRows;if(_13a){this.columns={};for(var i=0;i<_13a.length;i++){_13a[i]=this._configColumns(i+"-",_13a[i]);}}else{this.subRows=[this._configColumns("",this.columns)];}},_setColumns:function(_13b){this._destroyColumns();this.subRows=null;this.columns=_13b;this._updateColumns();},_setSubRows:function(_13c){this._destroyColumns();this.subRows=_13c;this._updateColumns();},setColumns:function(_13d){_100.deprecated("setColumns(...)","use set(\"columns\", ...) instead","dgrid 1.0");this.set("columns",_13d);},setSubRows:function(_13e){_100.deprecated("setSubRows(...)","use set(\"subRows\", ...) instead","dgrid 1.0");this.set("subRows",_13e);},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this.resize();}});Grid.appendIfNode=_105;Grid.defaultRenderCell=function(_13f,data,td,_140){if(data!=null){td.appendChild(document.createTextNode(data));}};return Grid;});},"dgrid/util/misc":function(){define("dgrid/util/misc",[],function(){var util={defaultDelay:15,throttle:function(cb,_141,_142){var ran=false;_142=_142||util.defaultDelay;return function(){if(ran){return;}ran=true;cb.apply(_141,arguments);setTimeout(function(){ran=false;},_142);};},throttleDelayed:function(cb,_143,_144){var ran=false;_144=_144||util.defaultDelay;return function(){if(ran){return;}ran=true;var a=arguments;setTimeout(function(){cb.apply(_143,a);ran=false;},_144);};},debounce:function(cb,_145,_146){var _147;_146=_146||util.defaultDelay;return function(){if(_147){clearTimeout(_147);_147=null;}var a=arguments;_147=setTimeout(function(){cb.apply(_145,a);},_146);};}};return util;});},"epi/packaging/UploadResults":function(){require({cache:{"url:epi/packaging/templates/UploadResults.htm":"<div>\r\n    <div class=\"epi-paddingVertical-small\">\r\n        <table class=\"epi-default\" dojoAttachPoint=\"installedTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        ${res.headerindex}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerfile}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersize}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerid}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headertitle}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersummary}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerdescription}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerstatus}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            {% for uploadedFile in files %}\r\n            <tr>\r\n                <td>\r\n                    {{ uploadedFile.index }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageFileName|safe }}\r\n                </td>\r\n                <td class=\"sizeColumn\">\r\n                    {{ uploadedFile.sizeStr }}\r\n                </td>\r\n\r\n                {% if uploadedFile.packageInfo.isInstalled %}\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.id|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.title|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.summary|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.description|safe }}\r\n                </td>\r\n                <td class=\"installedIcon\">\r\n                </td>\r\n                {% else %}\r\n                <td colspan=\"4\">\r\n                    <span class=\"error\">\r\n                        <ul>\r\n                            {% for error in uploadedFile.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n\r\n                        <ul>\r\n                            {% for error in uploadedFile.packageInfo.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n                    </span>\r\n                </td>\r\n                <td class=\"failureIcon\">\r\n                </td>\r\n                {% endif %}\r\n            </tr>\r\n            {% endfor %}\r\n        </table>\r\n    </div>\r\n</div>\r\n"}});define("epi/packaging/UploadResults",["dojo","dijit","dijit/_Widget","dojox/dtl/_Templated","dojo/text!./templates/UploadResults.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UploadResults","dojox/dtl/tag/logic"],function(dojo,_148,_149,_14a,_14b,res){return dojo.declare("epi.packaging.UploadResults",[_149,_14a],{res:res,files:[],templateString:_14b,_dijitTemplateCompat:true});});},"epi/packaging/main":function(){define("epi/packaging/main",["dojo"],function(dojo){return dojo.getObject("epi.packaging",true);});},"url:epi/packaging/templates/SelectedFiles.htm":"<div class=\"dojoxUploaderFileList\" data-dojo-attach-point=\"listContainer\" style=\"display:none\">\r\n    <span>${res.fileslisttitle}</span>\r\n    <div data-dojo-attach-point=\"sizeHeader\" style=\"display:none;\"></div>\r\n    <table class=\"dojoxUploaderFileListTable epi-default\" data-dojo-attach-point=\"listTable\">\r\n        <thead>\r\n            <tr class=\"dojoxUploaderFileListHeader\">\r\n                <th class=\"dojoxUploaderIndex\">\r\n                    ${res.headerindex}\r\n                </th>\r\n                <th class=\"dojoxUploaderIcon\">\r\n                    ${res.headertype}\r\n                </th>\r\n                <th class=\"dojoxUploaderFileName\">\r\n                    ${res.headerfile}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-dojo-attach-point=\"listNode\"></tbody>\r\n    </table>\r\n</div>\r\n","epi/packaging/Toolbar":function(){define("epi/packaging/Toolbar",["dojo","epi/shell/widget/Toolbar","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Toolbar"],function(dojo,_14c,res){return dojo.declare("epi.packaging.Toolbar",[_14c],{res:res,constructor:function(){},postCreate:function(){this.add([{name:"upload",label:this.res.uploadbuttonlabel,action:function(){dojo.publish("/epi/shell/action/changeview",["epi/packaging/UploadSection"]);}},{name:"restartWarning",widgetType:"epi.packaging.SiteRestartWarning"}]);this.inherited(arguments);},destroy:function(){this.inherited(arguments);}});});},"dojox/dtl/_base":function(){define("dojox/dtl/_base",["dojo/_base/kernel","dojo/_base/lang","dojox/string/tokenize","dojo/_base/json","dojo/dom","dojo/_base/xhr","dojox/string/Builder","dojo/_base/Deferred"],function(_14d,lang,_14e,json,dom,xhr,_14f,_150){_14d.experimental("dojox.dtl");var dd=lang.getObject("dojox.dtl",true);dd._base={};dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=lang.extend(function(dict){if(dict){lang._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _151=lang.delegate(this);_151.pop=function(){return last;};return _151;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_152){var n=this._normalize;if(this._getter){var got=this._getter(key);if(got!==undefined){return n(got);}}if(this[key]!==undefined){return n(this[key]);}return _152;},_normalize:function(_153){if(_153 instanceof Date){_153.year=_153.getFullYear();_153.month=_153.getMonth()+1;_153.day=_153.getDate();_153.date=_153.year+"-"+("0"+_153.month).slice(-2)+"-"+("0"+_153.day).slice(-2);_153.hour=_153.getHours();_153.minute=_153.getMinutes();_153.second=_153.getSeconds();_153.microsecond=_153.getMilliseconds();}return _153;},update:function(dict){var _154=this.push();if(dict){lang._mixin(this,dict);}return _154;}});var _155=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _156=/\s+/g;var _157=function(_158,_159){_158=_158||_156;if(!(_158 instanceof RegExp)){_158=new RegExp(_158,"g");}if(!_158.global){throw new Error("You must use a globally flagged RegExp with split "+_158);}_158.exec("");var part,_15a=[],_15b=0,i=0;while((part=_158.exec(this))){_15a.push(this.slice(_15b,_158.lastIndex-part[0].length));_15b=_158.lastIndex;if(_159&&(++i>_159-1)){break;}}_15a.push(this.slice(_15b));return _15a;};dd.Token=function(_15c,_15d){this.token_type=_15c;this.contents=new String(lang.trim(_15d));this.contents.split=_157;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_15e){var bit,bits=[],i=0;_15e=_15e||999;while(i++<_15e&&(bit=_155.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_15f,name,_160){var _161=dd.register.get(_15f,name.toLowerCase(),_160);if(!_161){if(!_160){throw new Error("No tag found for "+name);}return null;}var fn=_161[1];var deps=_161[2];var _162;if(fn.indexOf(":")!=-1){_162=fn.split(":");fn=_162.pop();}var mod=deps;if(/\./.test(deps)){deps=deps.replace(/\./g,"/");}require([deps],function(){});var _163=lang.getObject(mod);return _163[fn||name]||_163[name+"_"]||_163[fn+"_"];},getTag:function(name,_164){return ddt._get("tag",name,_164);},getFilter:function(name,_165){return ddt._get("filter",name,_165);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return xhr._getText(file.toString())||"";},_resolveLazy:function(_166,sync,json){if(sync){if(json){return json.fromJson(xhr._getText(_166))||{};}else{return dd.text.getTemplateString(_166);}}else{return xhr.get({handleAs:json?"json":"text",url:_166});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new _150();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (arg===undefined)||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new _150;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return _14e(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _167=lang.trim(tag).split(/\s+/g);for(var i=0,part;part=_167[i];i++){if(/\./.test(part)){part=part.replace(/\./g,"/");}require([part]);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=lang.extend(function(_168,_169){var str=_169?_168:ddt._resolveTemplateArg(_168,true)||"";var _16a=ddt.tokenize(str);var _16b=new dd._Parser(_16a);this.nodelist=_16b.parse();},{update:function(node,_16c){return ddt._resolveContextArg(_16c).addCallback(this,function(_16d){var _16e=this.render(new dd._Context(_16d));if(node.forEach){node.forEach(function(item){item.innerHTML=_16e;});}else{dom.byId(node).innerHTML=_16e;}return this;});},render:function(_16f,_170){_170=_170||this.getBuffer();_16f=_16f||new dd._Context({});return this.nodelist.render(_16f,_170)+"";},getBuffer:function(){return new _14f();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(_14e(str,qfRe,function(_171){return new dd._Filter(_171);}));}};dd._QuickNodeList=lang.extend(function(_172){this.contents=_172;},{render:function(_173,_174){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_174=_174.concat(this.contents[i].resolve(_173));}else{_174=_174.concat(this.contents[i]);}}return _174;},dummyRender:function(_175){return this.render(_175,dd.Template.prototype.getBuffer()).toString();},clone:function(_176){return this;}});dd._Filter=lang.extend(function(_177){if(!_177){throw new Error("Filter must be called with variable name");}this.contents=_177;var _178=this._cache[_177];if(_178){this.key=_178[0];this.filters=_178[1];}else{this.filters=[];_14e(_177,this._re,this._tokenize,this);this._cache[_177]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(arguments[i]!==undefined&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _179=arguments[pos];if(this._args[pos]=="'"){_179=_179.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_179=_179.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_179];break;}}var fn=ddt.getFilter(arguments[3]);if(!lang.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_17a){if(this.key===undefined){return "";}var str=this.resolvePath(this.key,_17a);for(var i=0,_17b;_17b=this.filters[i];i++){if(_17b[1]){if(_17b[1][0]){str=_17b[0](str,this.resolvePath(_17b[1][1],_17a));}else{str=_17b[0](str,_17b[1][1]);}}else{str=_17b[0](str);}}return str;},resolvePath:function(path,_17c){var _17d,_17e;var _17f=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_17f))){_17d=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_17f=="\""&&_17f==last){_17d=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_17e=path.split(".");_17d=_17c.get(_17e[0]);if(lang.isFunction(_17d)){var self=_17c.getThis&&_17c.getThis();if(_17d.alters_data){_17d="";}else{if(self){_17d=_17d.call(self);}else{_17d="";}}}for(var i=1;i<_17e.length;i++){var part=_17e[i];if(_17d){var base=_17d;if(lang.isObject(_17d)&&part=="items"&&_17d[part]===undefined){var _180=[];for(var key in _17d){_180.push([key,_17d[key]]);}_17d=_180;continue;}if(_17d.get&&lang.isFunction(_17d.get)&&_17d.get.safe){_17d=_17d.get(part);}else{if(_17d[part]===undefined){_17d=_17d[part];break;}else{_17d=_17d[part];}}if(lang.isFunction(_17d)){if(_17d.alters_data){_17d="";}else{_17d=_17d.call(base);}}else{if(_17d instanceof Date){_17d=dd._Context.prototype._normalize(_17d);}}}else{return "";}}}}return _17d;}});dd._TextNode=dd._Node=lang.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_181,_182){return _182.concat(this.contents);},isEmpty:function(){return !lang.trim(this.contents);},clone:function(){return this;}});dd._NodeList=lang.extend(function(_183){this.contents=_183||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_184){this.contents=this.contents.concat(_184);return this;},render:function(_185,_186){for(var i=0;i<this.contents.length;i++){_186=this.contents[i].render(_185,_186);if(!_186){throw new Error("Template must return buffer");}}return _186;},dummyRender:function(_187){return this.render(_187,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=lang.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_188,_189){var str=this.contents.resolve(_188);if(!str.safe){str=dd._base.escape(""+str);}return _189.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=lang.extend(function(_18a){this.contents=_18a;},{i:0,parse:function(_18b){var _18c={},_18d;_18b=_18b||[];for(var i=0;i<_18b.length;i++){_18c[_18b[i]]=true;}var _18e=new dd._NodeList();while(this.i<this.contents.length){_18d=this.contents[this.i++];if(typeof _18d=="string"){_18e.push(new dd._TextNode(_18d));}else{var type=_18d[0];var text=_18d[1];if(type==dd.TOKEN_VAR){_18e.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_18c[text]){--this.i;return _18e;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_18e.push(fn(this,new dd.Token(type,text)));}}}}}}if(_18b.length){throw new Error("Could not find closing tag(s): "+_18b.toString());}this.contents.length=0;return _18e;},next_token:function(){var _18f=this.contents[this.i++];return new dd.Token(_18f[0],_18f[1]);},delete_first_token:function(){this.i++;},skip_past:function(_190){while(this.i<this.contents.length){var _191=this.contents[this.i++];if(_191[0]==dd.TOKEN_BLOCK&&_191[1]==_190){return;}}throw new Error("Unclosed tag found when looking for "+_190);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_192,name){var _193=dd.register._registry[_192+"s"];for(var i=0,_194;_194=_193[i];i++){if(typeof _194[0]=="string"){if(_194[0]==name){return _194;}}else{if(name.match(_194[0])){return _194;}}}},getAttributeTags:function(){var tags=[];var _195=dd.register._registry.attributes;for(var i=0,_196;_196=_195[i];i++){if(_196.length==3){tags.push(_196);}else{var fn=lang.getObject(_196[1]);if(fn&&lang.isFunction(fn)){_196.push(fn);tags.push(_196);}}}return tags;},_any:function(type,base,_197){for(var path in _197){for(var i=0,fn;fn=_197[path][i];i++){var key=fn;if(lang.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_198){dd.register._any("tags",base,_198);},filters:function(base,_199){dd.register._any("filters",base,_199);}};var _19a=/&/g;var _19b=/</g;var _19c=/>/g;var _19d=/'/g;var _19e=/"/g;dd._base.escape=function(_19f){return dd.mark_safe(_19f.replace(_19a,"&amp;").replace(_19b,"&lt;").replace(_19c,"&gt;").replace(_19e,"&quot;").replace(_19d,"&#39;"));};dd._base.safe=function(_1a0){if(typeof _1a0=="string"){_1a0=new String(_1a0);}if(typeof _1a0=="object"){_1a0.safe=true;}return _1a0;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});return dd;});},"dgrid/List":function(){define("dgrid/List",["dojo/_base/array","dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(_1a1,_1a2,_1a3,_1a4,has,_1a5,_1a6,_1a7,put){_1a7("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var _1a8;var _1a9=put(document.getElementsByTagName("head")[0],"style"),_1aa=[],_1ab="dgrid-row-odd",_1ac="dgrid-row-even";_1a9=_1a9.sheet||_1a9.styleSheet;function _1ad(_1ae,css){var _1af=_1aa.length;_1aa[_1af]=(_1a9.cssRules||_1a9.rules).length;_1a9.addRule?_1a9.addRule(_1ae,css):_1a9.insertRule(_1ae+"{"+css+"}",_1aa[_1af]);return {remove:function(){_1b0(_1af);}};};function _1b0(_1b1){var _1b2=_1aa[_1b1],i,l=_1aa.length;if(_1b2===undefined){return;}_1a9.deleteRule?_1a9.deleteRule(_1b2):_1a9.removeRule(_1b2);_1aa[_1b1]=undefined;for(i=_1b1;i<l;i++){if(_1aa[i]>_1b2){_1aa[i]--;}}};function byId(id){return document.getElementById(id);};function move(item,_1b3,_1b4,_1b5){var _1b6,_1b7,_1b8;_1b8=_1b7=item.element;_1b3=_1b3||1;do{if(_1b6=_1b7[_1b3<0?"previousSibling":"nextSibling"]){do{_1b7=_1b6;if(((_1b7&&_1b7.className)+" ").indexOf(_1b4+" ")>-1){_1b8=_1b7;_1b3+=_1b3<0?1:-1;break;}}while(_1b6=(!_1b5||!_1b7.hidden)&&_1b7[_1b3<0?"lastChild":"firstChild"]);}else{if((_1b7=_1b7.parentNode)==this.domNode||(_1b7.className+" ").indexOf("dgrid-row ")>-1){break;}}}while(_1b3);return _1b8;};var _1b9=0;function _1ba(){return "dgrid_"+_1b9++;};var _1bb=has("ie")<7&&!has("quirks")?function(grid){var root,w,h,dims;if(!grid._started){return;}root=document.documentElement;w=root.clientWidth;h=root.clientHeight;dims=grid._prevWinDims||[];if(dims[0]!==w||dims[1]!==h){grid.resize();grid._prevWinDims=[w,h];}}:function(grid){grid._started&&grid.resize();};return _1a3(_1a6?[_1a6]:[],{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,postscript:function(_1bc,_1bd){var grid=this;(this._Row=function(id,_1be,_1bf){this.id=id;this.data=_1be;this.element=_1bf;}).prototype.remove=function(){grid.removeRow(this.element);};if(_1bd){this.srcNodeRef=_1bd=_1bd.nodeType?_1bd:byId(_1bd);}this.create(_1bc,_1bd);},listType:"list",create:function(_1c0,_1c1){if(_1c0){this.params=_1c0;_1a3.safeMixin(this,_1c0);this._sort=_1c0.sort||[];delete this.sort;}else{this._sort=[];}var _1c2=this.domNode=_1c1||put("div");this.observers=[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=_1c2.id=_1c2.id||this.id||_1ba();this.buildRendering();this.postCreate&&this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight){this.startup();}},buildRendering:function(){var _1c3=this.domNode,grid=this,_1c4,_1c5,_1c6,_1c7,_1c8;_1c8=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()=="rtl";put(_1c3,"[role=grid].ui-widget.dgrid.dgrid-"+this.listType);_1c4=this.headerNode=put(_1c3,"div.dgrid-header.dgrid-header-row.ui-widget-header"+(this.showHeader?"":".dgrid-header-hidden"));if(has("quirks")||has("ie")<8){_1c5=put(_1c3,"div.dgrid-spacer");}_1c6=this.bodyNode=this.touchNode=put(_1c3,"div.dgrid-scroller");_1c6.tabIndex=-1;this.headerScrollNode=put(_1c3,"div.dgrid-header-scroll.dgrid-scrollbar-width.ui-widget-header");_1c7=this.footerNode=put("div.dgrid-footer");if(!this.showFooter){_1c7.style.display="none";}put(_1c3,_1c7);if(_1c8){_1c3.className+=" dgrid-rtl"+(has("webkit")?"":" dgrid-rtl-nonwebkit");}_1a4(_1c6,"scroll",function(_1c9){_1c4.scrollLeft=_1c6.scrollLeft;_1c9.stopPropagation();_1a4.emit(_1c3,"scroll",{scrollTarget:_1c6});});this.configStructure();this.renderHeader();this.contentNode=put(this.bodyNode,"div.dgrid-content.ui-widget-content");this._listeners.push(this._resizeHandle=_1a4(window,"resize",_1a5.debounce(_1bb)));},startup:function(){this.inherited(arguments);if(this._started){return;}this._started=true;this.resize();this.set("sort",this._sort);},configStructure:function(){},resize:function(){var _1ca=this.bodyNode,_1cb=this.headerNode,_1cc=this.footerNode,_1cd=_1cb.offsetHeight,_1ce=this.showFooter?_1cc.offsetHeight:0,_1cf=has("quirks")||has("ie")<7;this.headerScrollNode.style.height=_1ca.style.marginTop=_1cd+"px";if(_1ce){_1ca.style.marginBottom=_1ce+"px";}if(_1cf){_1ca.style.height="";_1ca.style.height=Math.max((this.domNode.offsetHeight-_1cd-_1ce),0)+"px";if(_1ce){_1cc.style.bottom="1px";setTimeout(function(){_1cc.style.bottom="";},0);}}if(!_1a8){var _1d0=put(document.body,"div.dgrid-scrollbar-measure");_1a8=_1d0.offsetWidth-_1d0.clientWidth;put(_1d0,"!");if(has("ie")===7){_1a8++;}this.addCssRule(".dgrid-scrollbar-width","width: "+_1a8+"px");this.addCssRule(".dgrid-scrollbar-height","height: "+_1a8+"px");if(_1a8!=17&&!_1cf){this.addCssRule(".dgrid-header","right: "+_1a8+"px");this.addCssRule(".dgrid-rtl-nonwebkit .dgrid-header","left: "+_1a8+"px");}}if(_1cf){_1cb.style.width=_1ca.clientWidth+"px";setTimeout(function(){_1cb.scrollLeft=_1ca.scrollLeft;},0);}},addCssRule:_1ad,on:function(_1d1,_1d2){var _1d3=_1a4(this.domNode,_1d1,_1d2);if(!has("dom-addeventlistener")){this._listeners.push(_1d3);}return _1d3;},cleanup:function(){var _1d4=this.observers,i;for(i in this._rowIdToObject){if(this._rowIdToObject[i]!=this.columns){var _1d5=byId(i);if(_1d5){this.removeRow(_1d5,true);}}}for(i=0;i<_1d4.length;i++){var _1d6=_1d4[i];_1d6&&_1d6.cancel();}this.observers=[];this.preload=null;},destroy:function(){for(var i=this._listeners.length;i--;){this._listeners[i].remove();}delete this._listeners;this.cleanup();put("!",this.domNode);},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";},newRow:function(_1d7,_1d8,to,_1d9){if(_1d8.parentNode){var i=_1d9.start+to;var row=this.insertRow(_1d7,_1d8.parentNode,_1d8,i,_1d9);put(row,".ui-state-highlight");setTimeout(function(){put(row,"!ui-state-highlight");},250);return row;}},adjustRowIndices:function(_1da){if(this.maintainOddEven){var next=_1da;var _1db=next.rowIndex;do{if(next.rowIndex>-1){put(next,"."+(_1db%2==1?_1ab:_1ac)+"!"+(_1db%2==0?_1ab:_1ac));next.rowIndex=_1db++;}}while((next=next.nextSibling)&&next.rowIndex!=_1db);}},renderArray:function(_1dc,_1dd,_1de){_1de=_1de||{};var self=this,_1df=_1de.start||0,row,rows,_1e0;if(!_1dd){this._lastCollection=_1dc;}if(_1dc.observe){var _1e1=this.observers.push(_1dc.observe(function(_1e2,from,to){var _1e3;if(from>-1&&rows[from]){row=rows.splice(from,1)[0];if(row.parentNode==_1e0){_1e3=row.nextSibling;if(_1e3){_1e3.rowIndex--;self.removeRow(row);}}if(self._processScroll){self._processScroll();}}if(to>-1){row=self.newRow(_1e2,rows[to]||_1dd.parentNode?_1dd:(rows[to-1]&&rows[to-1].nextSibling),to,_1de);if(row){row.observerIndex=_1e1;rows.splice(to,0,row);if(!_1e3||to<_1e3.rowIndex){_1e3=row;}}_1de.count++;}from!=to&&_1e3&&self.adjustRowIndices(_1e3);},true))-1;}var _1e4=document.createDocumentFragment();if(_1dc.map){rows=_1dc.map(_1e5,console.error);if(rows.then){return rows.then(_1e6);}}else{rows=[];for(var i=0,l=_1dc.length;i<l;i++){rows[i]=_1e5(_1dc[i]);}}var _1e7;function _1e5(_1e8){_1e7=self.insertRow(_1e8,_1e4,null,_1df++,_1de);_1e7.observerIndex=_1e1;return _1e7;};function _1e6(_1e9){_1e0=_1dd?_1dd.parentNode:self.contentNode;if(_1e0){_1e0.insertBefore(_1e4,_1dd||null);_1e7=_1e9[_1e9.length-1];_1e7&&self.adjustRowIndices(_1e7);}return (rows=_1e9);};return _1e6(rows);},renderHeader:function(){},_autoId:0,insertRow:function(_1ea,_1eb,_1ec,i,_1ed){var id=this.id+"-row-"+((this.store&&this.store.getIdentity)?this.store.getIdentity(_1ea):this._autoId++);var row=byId(id);if(!row||(_1ec&&row.parentNode!=_1ec.parentNode)){if(row){this.removeRow(row);}row=this.renderRow(_1ea,_1ed);row.className=(row.className||"")+" ui-state-default dgrid-row "+(i%2==1?_1ab:_1ac);this._rowIdToObject[row.id=id]=_1ea;}_1eb.insertBefore(row,_1ec);row.rowIndex=i;return row;},renderRow:function(_1ee,_1ef){return put("div",""+_1ee);},removeRow:function(_1f0,_1f1){_1f0=_1f0.element||_1f0;delete this._rowIdToObject[_1f0.id];if(!_1f1){put(_1f0,"!");}},row:function(_1f2){var id;if(_1f2 instanceof this._Row){return _1f2;}if(_1f2.target&&_1f2.target.nodeType){_1f2=_1f2.target;}if(_1f2.nodeType){var _1f3;do{var _1f4=_1f2.id;if((_1f3=this._rowIdToObject[_1f4])){return new this._Row(_1f4.substring(this.id.length+5),_1f3,_1f2);}_1f2=_1f2.parentNode;}while(_1f2&&_1f2!=this.domNode);return;}if(typeof _1f2=="object"){id=this.store.getIdentity(_1f2);}else{id=_1f2;_1f2=this._rowIdToObject[this.id+"-row-"+id];}return new this._Row(id,_1f2,byId(this.id+"-row-"+id));},cell:function(_1f5){return {row:this.row(_1f5)};},_move:move,up:function(row,_1f6,_1f7){return this.row(move(row,-(_1f6||1),"dgrid-row",_1f7));},down:function(row,_1f8,_1f9){return this.row(move(row,_1f8||1,"dgrid-row",_1f9));},get:function(name){var fn="_get"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){return this[fn].apply(this,[].slice.call(arguments,1));}if(!1&&typeof this[fn+"Attr"]==="function"){}return this[name];},set:function(name,_1fa){if(typeof name==="object"){for(var k in name){this.set(k,name[k]);}}else{var fn="_set"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){this[fn].apply(this,[].slice.call(arguments,1));}else{if(!1&&typeof this[fn+"Attr"]==="function"){}this[name]=_1fa;}}return this;},_setSort:function(_1fb,_1fc){this._sort=typeof _1fb!="string"?_1fb:[{attribute:_1fb,descending:_1fc}];this.refresh();if(this._lastCollection){if(_1fb.length){if(typeof _1fb!="string"){_1fc=_1fb[0].descending;_1fb=_1fb[0].attribute;}this._lastCollection.sort(function(a,b){var aVal=a[_1fb],bVal=b[_1fb];if(aVal===undefined){aVal="";}if(bVal===undefined){bVal="";}return aVal==bVal?0:(aVal>bVal==!_1fc?1:-1);});}this.renderArray(this._lastCollection);}},sort:function(_1fd,_1fe){_1a2.deprecated("sort(...)","use set(\"sort\", ...) instead","dgrid 1.0");this.set("sort",_1fd,_1fe);},_getSort:function(){return this._sort;},_setShowHeader:function(show){this.showHeader=show;put(this.headerNode,(show?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();},setShowHeader:function(show){_1a2.deprecated("setShowHeader(...)","use set(\"showHeader\", ...) instead","dgrid 1.0");this.set("showHeader",show);}});});},"dojox/form/uploader/FileList":function(){define("dojox/form/uploader/FileList",["dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_base/manager","dojox/form/uploader/Base"],function(fx,_1ff,_200,_201,lang,_202,_203,_204){return _201("dojox.form.uploader.FileList",[_204],{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:"<div class=\"dojoxUploaderFileList\">"+"<div dojoAttachPoint=\"progressNode\" class=\"dojoxUploaderFileListProgress\"><div dojoAttachPoint=\"percentBarNode\" class=\"dojoxUploaderFileListProgressBar\"></div><div dojoAttachPoint=\"percentTextNode\" class=\"dojoxUploaderFileListPercentText\">0%</div></div>"+"<table class=\"dojoxUploaderFileListTable\">"+"<thead><tr class=\"dojoxUploaderFileListHeader\"><th class=\"dojoxUploaderIndex\">${headerIndex}</th><th class=\"dojoxUploaderIcon\">${headerType}</th><th class=\"dojoxUploaderFileName\">${headerFilename}</th><th class=\"dojoxUploaderFileSize\" dojoAttachPoint=\"sizeHeader\">${headerFilesize}</th></tr></thead>"+"<tbody class=\"dojoxUploaderFileListContent\" dojoAttachPoint=\"listNode\">"+"</tbody>"+"</table>"+"<div>",postCreate:function(){this.setUploader();this.hideProgress();},reset:function(){for(var i=0;i<this.rowAmt;i++){this.listNode.deleteRow(0);}this.rowAmt=0;},setUploader:function(){if(!this.uploaderId&&!this.uploader){}else{if(this.uploaderId&&!this.uploader){this.uploader=_203.byId(this.uploaderId);}else{if(this._upCheckCnt>4){return;}}}if(this.uploader){this.connect(this.uploader,"onChange","_onUploaderChange");this.connect(this.uploader,"reset","reset");this.connect(this.uploader,"onBegin",function(){this.showProgress(true);});this.connect(this.uploader,"onProgress","_progress");this.connect(this.uploader,"onComplete",function(){setTimeout(lang.hitch(this,function(){this.hideProgress(true);}),1250);});if(!(this._fileSizeAvail={"html5":1,"flash":1}[this.uploader.uploadType])){this.sizeHeader.style.display="none";}}else{this._upCheckCnt++;setTimeout(lang.hitch(this,"setUploader"),250);}},hideProgress:function(_205){var o=_205?{ani:true,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:false};this._hideShowProgress(o);},showProgress:function(_206){var o=_206?{ani:true,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:false};this._hideShowProgress(o);},_progress:function(_207){this.percentTextNode.innerHTML=_207.percent;_1ff.set(this.percentBarNode,"width",_207.percent);},_hideShowProgress:function(o){var node=this.progressNode;var _208=function(){_1ff.set(node,"display",o.endDisp);};if(o.ani){_1ff.set(node,"display","block");fx.animateProperty({node:node,properties:{height:{start:o.beg,end:o.end,units:"px"}},onEnd:_208}).play();}else{_208();}},_onUploaderChange:function(_209){this.reset();_202.forEach(_209,function(f,i){this._addRow(i+1,this.getFileType(f.name),f.name,f.size);},this);},_addRow:function(_20a,type,name,size){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);_200.add(c,"dojoxUploaderIndex");c.innerHTML=_20a;c=r.insertCell(-1);_200.add(c,"dojoxUploaderIcon");c.innerHTML=type;c=r.insertCell(-1);_200.add(c,"dojoxUploaderFileName");c.innerHTML=name;if(this._fileSizeAvail){c=r.insertCell(-1);_200.add(c,"dojoxUploaderSize");c.innerHTML=this.convertBytes(size).value;}this.rowAmt++;}});});},"dojox/dtl/tag/logic":function(){define("dojox/dtl/tag/logic",["dojo/_base/lang","../_base"],function(lang,dd){lang.getObject("dojox.dtl.tag.logic",true);var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=lang.extend(function(_20b,_20c,_20d,type){this.bools=_20b;this.trues=_20c;this.falses=_20d;this.type=type;},{render:function(_20e,_20f){var i,bool,_210,_211,_212;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_210=bool[0];_211=bool[1];_212=_211.resolve(_20e);if((_212&&!_210)||(_210&&!_212)){if(this.falses){_20f=this.falses.unrender(_20e,_20f);}return (this.trues)?this.trues.render(_20e,_20f,this):_20f;}}if(this.trues){_20f=this.trues.unrender(_20e,_20f);}return (this.falses)?this.falses.render(_20e,_20f,this):_20f;}else{for(i=0;bool=this.bools[i];i++){_210=bool[0];_211=bool[1];_212=_211.resolve(_20e);if(_212==_210){if(this.trues){_20f=this.trues.unrender(_20e,_20f);}return (this.falses)?this.falses.render(_20e,_20f,this):_20f;}}if(this.falses){_20f=this.falses.unrender(_20e,_20f);}return (this.trues)?this.trues.render(_20e,_20f,this):_20f;}return _20f;},unrender:function(_213,_214){_214=(this.trues)?this.trues.unrender(_213,_214):_214;_214=(this.falses)?this.falses.unrender(_213,_214):_214;return _214;},clone:function(_215){var _216=(this.trues)?this.trues.clone(_215):null;var _217=(this.falses)?this.falses.clone(_215):null;return new this.constructor(this.bools,_216,_217,this.type);}});ddtl.IfEqualNode=lang.extend(function(var1,var2,_218,_219,_21a){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_218;this.falses=_219;this.negate=_21a;},{render:function(_21b,_21c){var var1=this.var1.resolve(_21b);var var2=this.var2.resolve(_21b);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_21c=this.falses.unrender(_21b,_21c,this);}return (this.trues)?this.trues.render(_21b,_21c,this):_21c;}if(this.trues){_21c=this.trues.unrender(_21b,_21c,this);}return (this.falses)?this.falses.render(_21b,_21c,this):_21c;},unrender:function(_21d,_21e){return ddtl.IfNode.prototype.unrender.call(this,_21d,_21e);},clone:function(_21f){var _220=this.trues?this.trues.clone(_21f):null;var _221=this.falses?this.falses.clone(_21f):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_220,_221,this.negate);}});ddtl.ForNode=lang.extend(function(_222,loop,_223,_224){this.assign=_222;this.loop=new dd._Filter(loop);this.reversed=_223;this.nodelist=_224;this.pool=[];},{render:function(_225,_226){var i,j,k;var _227=false;var _228=this.assign;for(k=0;k<_228.length;k++){if(typeof _225[_228[k]]!="undefined"){_227=true;_225=_225.push();break;}}if(!_227&&_225.forloop){_227=true;_225=_225.push();}var _229=this.loop.resolve(_225)||[];for(i=_229.length;i<this.pool.length;i++){this.pool[i].unrender(_225,_226,this);}if(this.reversed){_229=_229.slice(0).reverse();}var _22a=lang.isObject(_229)&&!lang.isArrayLike(_229);var _22b=[];if(_22a){for(var key in _229){_22b.push(_229[key]);}}else{_22b=_229;}var _22c=_225.forloop={parentloop:_225.get("forloop",{})};var j=0;for(i=0;i<_22b.length;i++){var item=_22b[i];_22c.counter0=j;_22c.counter=j+1;_22c.revcounter0=_22b.length-j-1;_22c.revcounter=_22b.length-j;_22c.first=!j;_22c.last=(j==_22b.length-1);if(_228.length>1&&lang.isArrayLike(item)){if(!_227){_227=true;_225=_225.push();}var _22d={};for(k=0;k<item.length&&k<_228.length;k++){_22d[_228[k]]=item[k];}lang.mixin(_225,_22d);}else{_225[_228[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_226));}_226=this.pool[j++].render(_225,_226,this);}delete _225.forloop;if(_227){_225=_225.pop();}else{for(k=0;k<_228.length;k++){delete _225[_228[k]];}}return _226;},unrender:function(_22e,_22f){for(var i=0,pool;pool=this.pool[i];i++){_22f=pool.unrender(_22e,_22f);}return _22f;},clone:function(_230){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_230));}});lang.mixin(ddtl,{if_:function(_231,_232){var i,part,type,_233=[],_234=_232.contents.split();_234.shift();_232=_234.join(" ");_234=_232.split(" and ");if(_234.length==1){type="or";_234=_232.split(" or ");}else{type="and";for(i=0;i<_234.length;i++){if(_234[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_234[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_233.push([not,new dd._Filter(part)]);}var _235=_231.parse(["else","endif"]);var _236=false;var _232=_231.next_token();if(_232.contents=="else"){_236=_231.parse(["endif"]);_231.next_token();}return new ddtl.IfNode(_233,_235,_236,type);},_ifequal:function(_237,_238,_239){var _23a=_238.split_contents();if(_23a.length!=3){throw new Error(_23a[0]+" takes two arguments");}var end="end"+_23a[0];var _23b=_237.parse(["else",end]);var _23c=false;var _238=_237.next_token();if(_238.contents=="else"){_23c=_237.parse([end]);_237.next_token();}return new ddtl.IfEqualNode(_23a[1],_23a[2],_23b,_23c,_239);},ifequal:function(_23d,_23e){return ddtl._ifequal(_23d,_23e);},ifnotequal:function(_23f,_240){return ddtl._ifequal(_23f,_240,true);},for_:function(_241,_242){var _243=_242.contents.split();if(_243.length<4){throw new Error("'for' statements should have at least four words: "+_242.contents);}var _244=_243[_243.length-1]=="reversed";var _245=(_244)?-3:-2;if(_243[_243.length+_245]!="in"){throw new Error("'for' tag received an invalid argument: "+_242.contents);}var _246=_243.slice(1,_245).join(" ").split(/ *, */);for(var i=0;i<_246.length;i++){if(!_246[i]||_246[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_242.contents);}}var _247=_241.parse(["endfor"]);_241.next_token();return new ddtl.ForNode(_246,_243[_243.length+_245+1],_244,_247);}});return dojox.dtl.tag.logic;});},"epi/packaging/RootContainer":function(){define("epi/packaging/RootContainer",["epi","dojo","dijit","dijit/layout/BorderContainer","epi/packaging/AntiForgeryData","epi/packaging/Toolbar","epi/packaging/NavigationMenu","epi/shell/widget/WidgetSwitcher","dijit/layout/ContentPane"],function(epi,dojo,_248,_249,_24a,_24b,_24c,_24d,_24e){return dojo.declare("epi.packaging.RootContainer",[_249],{_antiForgeryData:null,startup:function(){if(this._started){return;}this._antiForgeryData=new _24a(this.antiForgeryToken);var _24f=new _24b();var _250=new _24e({region:"top",content:_24f});this.addChild(_250);var _251=new _24c({antiForgeryData:this._antiForgeryData});var _252=new _24e({region:"left",content:_251,style:"width: 17em"});this.addChild(_252);var _253=new _24d({componentConstructorArgs:{antiForgeryData:this._antiForgeryData},skipInitialRequest:true,supportedContextTypes:[]});var _254=new _24e({region:"center",content:_253});this.addChild(_254);this.inherited(arguments);}});});},"epi/packaging/DetailedView":function(){require({cache:{"url:epi/packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit.layout.TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dependenciesTabContainer\" data-dojo-type=\"dijit.layout.ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi.packaging.DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>"}});define("epi/packaging/DetailedView",["epi","epi/datetime","dojo","dojo/dom-geometry","dijit","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/_LayoutWidget","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/shell/widget/_ActionProviderWidget","dojo/text!./templates/DetailedView.htm","epi/shell/widget/Toolbar","epi/packaging/DependenciesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView"],function(epi,_255,dojo,_256,_257,_258,_259,_25a,_25b,_25c,_25d,_25e,_25f,_260,res){return dojo.declare("epi.packaging.DetailedView",[_25a,_258,_259,_25d],{currentPackage:null,installHandler:null,updateHandler:null,unInstallHandler:null,closeHandler:null,res:res,templateString:_25e,_specItemTemplate:"<li>                                <span class='epi-specItemLabel'>{specItemLabel}</span>                                <span class='epi-specItemValue'>{specItemValue}</span>                            </li>",_toolbar:null,postCreate:function(){this.inherited(arguments);if(!this.currentPackage){return;}this._loadOverviewTabContent();this._loadSpecsTabContent();this._loadDependenciesTabContent();},startup:function(){this.inherited(arguments);},layout:function(){this.inherited(arguments);this._contentBox.h=_256.position(this.contentContainer.parentNode).h;this.tabContainer.resize(this._contentBox);if(!this.currentPackage||!this.currentPackage.dependencies||this.currentPackage.dependencies.length<1){this.dependenciesContent.innerHTML=this.res.tab.dependencies.nodependencies;}},_hideTab:function(_261){dojo.forEach(this.tabContainer.tablist.getChildren(),dojo.hitch(this,function(item,_262,_263){if(item.label===_261){dojo.style(item.domNode,{display:"none"});return;}}));},_loadOverviewTabContent:function(){this.overviewAboutContent.innerHTML=this.currentPackage.description||"";this.overviewReleaseNotesContent.innerHTML=this.currentPackage.releaseNotes||"";},_loadDependenciesTabContent:function(){this.dependenciesList.data=this.currentPackage.dependencies;},_loadSpecsTabContent:function(){var _264="";if(this.currentPackage.versionInstalled){if(this.currentPackage.version==this.currentPackage.versionLatestAvailable&&this.currentPackage.isInstalled){_264+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-installedStatusIcon'></span>"+this.res.tab.content.installed);}else{_264+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-newVersionStatusIcon'></span>"+dojo.replace(this.res.tab.content.priorversioninstalled,{priorversion:this.currentPackage.versionInstalled}));}}else{_264+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-notInstalledStatusIcon'></span>"+this.res.tab.content.notinstalled);}var _265=_255.toUserFriendlyHtml(this.currentPackage.installDate);_264+=this._addSpecItems(this.res.tab.content.installationdate,_265||this.res.tab.content.notavailable);_264+=this._addSpecItems(this.res.tab.content.installedby,this.currentPackage.installedBy||this.res.tab.content.notavailable);_264+=this._addSpecItems(this.res.tab.content.version,this.currentPackage.version||"");_264+=this._addSpecItems(this.res.tab.content.releaseby,this.currentPackage.authors||"");var _266=dojo.map(this.currentPackage.tags,function(item){return " \""+item+"\"";});_264+=this._addSpecItems(this.res.tab.content.tags,_266||"");this.specItemList.innerHTML=_264;},_addSpecItems:function(_267,_268){return dojo.replace(this._specItemTemplate,{specItemLabel:_267,specItemValue:_268});},getActions:function(){if(!this.currentPackage){return [];}this._actions=[];if(this.currentPackage.isUpdateAvailable){this.addActions({name:"update",label:epi.resources.action.update,action:dojo.hitch(this,this.updateHandler)});if(!this.currentPackage.isSystem){this.addActions({name:"uninstall",label:epi.resources.action.uninstall,action:dojo.hitch(this,this.unInstallHandler)});}}else{if(!this.currentPackage.isInstalled){this.addActions({name:"install",label:epi.resources.action.install,action:dojo.hitch(this,this.installHandler)});}else{if(!this.currentPackage.isSystem){this.addActions({name:"uninstall",label:epi.resources.action.uninstall,action:dojo.hitch(this,this.unInstallHandler)});}}}this.addActions({name:"close",label:epi.resources.action.close,action:dojo.hitch(this,this._closeClick)});return this._actions;},_closeClick:function(){if(this.closeHandler){this.closeHandler();}}});});},"epi/packaging/ModuleSummary":function(){require({cache:{"url:epi/packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi.packaging.StatusMessageList\" class=\"epi-advancedListingError\"/></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n</div>"}});define("epi/packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi/packaging/DetailedView","epi/packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(dojo,_269,_26a,_26b,_26c,_26d,_26e,_26f,_270,_271,_272,_273,_274,_275,_276,_277,res){return dojo.declare("epi.packaging.ModuleSummary",[_26d,_26e,_26f],{res:res,templateString:_277,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_272.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_272.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_272.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_269.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_269.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_269.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},destroy:function(){if(this._moduleStandby){this._moduleStandby.destroyRecursive(false);}this.inherited(arguments);},onInstall:function(_278){},onInstallError:function(_279){},onUpdate:function(_27a){},onUpdateError:function(_27b){},onUninstall:function(_27c){},onUninstallError:function(_27d){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _27e=_271.toUserFriendlyHtml(this.module.installDate);var _27f="Installed on "+_27e+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_27f;}else{dojo.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_280){if(_280){this.moduleIcon.innerHTML=_26b.substitute(this.iconTemplate,[_280]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){dojo.style(this.InstallButton.domNode,"display","none");dojo.style(this.UninstallButton.domNode,"display","none");dojo.style(this.UpdateButton.domNode,"display","none");dojo.style(this.updateIndicatorContainer,"display","none");if(this.module.versionInstalled){if(this.module.isInstalled){dojo.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}else{dojo.style(this.UpdateButton.domNode,"display","inline-block");}}else{dojo.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.isSystem){dojo.style(this.UninstallButton.domNode,"display","none");}},_createTags:function(){dojo.forEach(this.module.tags,function(tag,i){var _281=dojo.create("span");_26a.add(_281,"epi-valueItem");this.tagList.appendChild(_281);_281.innerHTML=tag;},this);},_createDependencies:function(){dojo.forEach(this.module.dependencies,function(_282,i){var _283=dojo.create("span");_26a.add(_283,"epi-valueItem");this.dependenciesList.appendChild(_283);_283.innerHTML=_282.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,dojo.hitch(this,function(_284){if(_284){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,dojo.hitch(this,function(_285){if(_285){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,dojo.hitch(this,function(_286){if(_286){this._updateModule();}}));},_moreInfoClick:function(e){_269.stop(e);var _287=this;var _288=new _274({content:new _275({currentPackage:this.module,installHandler:dojo.hitch(_288,function(){_287._showConfirmationDialog(_287.res.installconfirmation,dojo.hitch(_288,function(_289){if(_289){this.hide();_287._installModule();}}));}),updateHandler:dojo.hitch(_288,function(){_287._showConfirmationDialog(_287.res.updateconfirmation,dojo.hitch(_288,function(_28a){if(_28a){this.hide();_287._updateModule();}}));}),unInstallHandler:dojo.hitch(_288,function(){_287._showConfirmationDialog(_287.res.uninstallconfirmation,dojo.hitch(_288,function(_28b){if(_28b){this.hide();_287._uninstallModule();}}));}),closeHandler:dojo.hitch(_288,function(){_288.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_288.show();},_installModule:function(){this._showStandby();var _28c={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_28c);dojo.xhrPost({content:_28c,url:this.installUrl,handleAs:"json",load:dojo.hitch(this,function(_28d){this.module=_28d;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:dojo.hitch(this,function(err,_28e){this._moduleStandby.hide();dojo.publish("onServerError",[_28e]);})});},_updateModule:function(){this._showStandby();var _28f={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_28f);dojo.xhrPost({content:_28f,url:this.updateUrl,handleAs:"json",load:dojo.hitch(this,function(_290){this.module=_290;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:dojo.hitch(this,function(err,_291){this._moduleStandby.hide();dojo.publish("onServerError",[_291]);})});},_uninstallModule:function(){this._showStandby();var _292={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_292);dojo.xhrPost({content:_292,url:this.uninstallUrl,handleAs:"json",load:dojo.hitch(this,function(_293){this.module=_293;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:dojo.hitch(this,function(err,_294){this._moduleStandby.hide();dojo.publish("onServerError",[_294]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _270({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_295,_296){var _297=new _273({description:dojo.replace(_295,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_296});_297.show();}});});},"dgrid/OnDemandGrid":function(){define("dgrid/OnDemandGrid",["dojo/_base/declare","./Grid","./OnDemandList"],function(_298,Grid,_299){return _298([Grid,_299],{});});},"dgrid/Selection":function(){define("dgrid/Selection",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query"],function(_29a,_29b,_29c,on,has,_29d,List,_29e,put){var _29f=has("mac")?"metaKey":"ctrlKey";return _29b([List],{selectionDelegate:".dgrid-row",selectionEvents:"mousedown,dgrid-cellfocusin",deselectOnRefresh:true,allowSelectAll:false,create:function(){this.selection={};return this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();},selection:{},selectionMode:"extended",_setSelectionMode:function(mode){if(mode==this.selectionMode){return;}this.clearSelection();this._lastSelected=null;this.selectionMode=mode;},setSelectionMode:function(mode){_29a.deprecated("setSelectionMode(...)","use set(\"selectionMode\", ...) instead","dgrid 1.0");this.set("selectionMode",mode);},_handleSelect:function(_2a0,_2a1){if(this.selectionMode=="none"||(_2a0.type=="dgrid-cellfocusin"&&_2a0.parentType=="mousedown")){return;}var _2a2=_2a0.type=="mousedown"?_2a0[_29f]:_2a0.ctrlKey;if(_2a0.type=="mousedown"||!_2a0.ctrlKey||_2a0.keyCode==32){var mode=this.selectionMode,row=_2a1,_2a3=this.row(row),_2a4=this._lastSelected;if(mode=="single"){if(_2a4==row){if(_2a2){this.select(row,null,null);}}else{this.clearSelection();this.select(row);}this._lastSelected=row;}else{var _2a5;if((_2a0.button!=2&&mode=="extended"&&!_2a2)||(_2a0.button==2&&!(this.selection[_2a3.id]))){this.clearSelection(_2a3.id);}if(!_2a0.shiftKey){_2a4=_2a5=_2a2?null:undefined;}this.select(row,_2a4,_2a5);if(!_2a4){this._lastSelected=row;}}if(_2a0.type=="mousedown"&&(_2a0.shiftKey||_2a2)){_2a0.preventDefault();}}},_initSelectionEvents:function(){var grid=this,_2a6=this.selectionDelegate;on(this.domNode,"selectstart",function(_2a7){var tag=_2a7.target&&_2a7.target.tagName;if(tag!="INPUT"&&tag!="TEXTAREA"){_2a7.preventDefault();}});function _2a8(_2a9){grid._handleSelect(_2a9,this);};if(_29e){on(this.contentNode,_29e.selector(_2a6,_29e.tap),function(evt){grid._handleSelect(evt,this);});}else{on(this.contentNode,on.selector(_2a6,this.selectionEvents),_2a8);}if(this.allowSelectAll){this.on("keydown",function(_2aa){if(_2aa[_29f]&&_2aa.keyCode==65){_2aa.preventDefault();grid[grid.allSelected?"clearSelection":"selectAll"]();}});}_29d.before(this,"removeRow",function(_2ab,_2ac){if(!_2ac){if(this.row(_2ab).id in this.selection){this.deselect(_2ab);}}});},allowSelect:function(row){return true;},_selectionEventQueue:function(_2ad,type){var grid=this,_2ae="dgrid-"+(_2ad?"select":"deselect"),rows=this[_2ae];if(rows){return rows;}setTimeout(this._fireSelectionEvent=function(){if(!rows){return;}var _2af={bubbles:true,grid:grid};_2af[type]=rows;on.emit(grid.contentNode,_2ae,_2af);rows=null;delete grid[_2ae];},0);return (rows=this[_2ae]=[]);},select:function(row,_2b0,_2b1){if(_2b1===undefined){_2b1=true;}if(!row.element){row=this.row(row);}if(this.allowSelect(row)){var _2b2=this.selection;var _2b3=_2b2[row.id];if(_2b1===null){_2b1=!_2b3;}var _2b4=row.element;if(!_2b1&&!this.allSelected){delete this.selection[row.id];}else{_2b2[row.id]=_2b1;}if(_2b4){if(_2b1){put(_2b4,".dgrid-selected.ui-state-active");}else{put(_2b4,"!dgrid-selected!ui-state-active");}}if(_2b1!=_2b3&&_2b4){this._selectionEventQueue(_2b1,"rows").push(row);}if(_2b0){if(!_2b0.element){_2b0=this.row(_2b0);}var _2b5=_2b0.element;var _2b6=row.element;var _2b7=(_2b5&&(_2b5.compareDocumentPosition?_2b5.compareDocumentPosition(_2b6)==2:_2b5.sourceIndex>_2b6.sourceIndex))?"down":"up";while(row.element!=_2b5&&(row=this[_2b7](row))){this.select(row);}}}},deselect:function(row,_2b8){this.select(row,_2b8,false);},clearSelection:function(_2b9){this.allSelected=false;for(var id in this.selection){if(_2b9!==id){this.deselect(id);}}},selectAll:function(){this.allSelected=true;this.selection={};for(var i in this._rowIdToObject){var row=this.row(this._rowIdToObject[i]);this.select(row.id);}},isSelected:function(_2ba){if(!_2ba){return false;}if(!_2ba.element){_2ba=this.row(_2ba);}return !!this.selection[_2ba.id];},refresh:function(){if(this.deselectOnRefresh){this.clearSelection();this._fireSelectionEvent&&this._fireSelectionEvent();}this._lastSelected=null;this.inherited(arguments);},renderArray:function(){var grid=this,rows=this.inherited(arguments);_29c.when(rows,function(rows){var _2bb=grid.selection,i,row,_2bc;for(i=0;i<rows.length;i++){row=grid.row(rows[i]);_2bc=row.id in _2bb?_2bb[row.id]:grid.allSelected;if(_2bc){grid.select(row,null,_2bc);}}});return rows;}});});},"dgrid/_StoreMixin":function(){define("dgrid/_StoreMixin",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on"],function(_2bd,_2be,lang,_2bf,_2c0){function _2c1(err){if(_2c0.emit(this.domNode,"dgrid-error",{error:err,cancelable:true,bubbles:true})){console.error(err);}};return _2be(null,{store:null,query:null,queryOptions:null,getBeforePut:true,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};},_configColumn:function(_2c2){if(_2c2.set){if(!this._columnsWithSet){this._columnsWithSet={};}this._columnsWithSet[_2c2.field]=_2c2;}},_configColumns:function(){this._columnsWithSet=null;return this.inherited(arguments);},_setStore:function(_2c3,_2c4,_2c5){this.store=_2c3;this.dirty={};this.set("query",_2c4,_2c5);},_setQuery:function(_2c6,_2c7){var sort=_2c7&&_2c7.sort;this.query=_2c6!==undefined?_2c6:this.query;this.queryOptions=_2c7||this.queryOptions;sort?this.sort(sort):this.refresh();},setStore:function(_2c8,_2c9,_2ca){_2bd.deprecated("setStore(...)","use set(\"store\", ...) instead","dgrid 1.0");this.set("store",_2c8,_2c9,_2ca);},setQuery:function(_2cb,_2cc){_2bd.deprecated("setQuery(...)","use set(\"query\", ...) instead","dgrid 1.0");this.set("query",_2cb,_2cc);},_getQueryOptions:function(){var _2cd=lang.delegate(this.queryOptions,{});if(this._sort.length){_2cd.sort=this._sort;}return _2cd;},_getQuery:function(){var q=this.query;return typeof q=="object"&&q!=null?lang.delegate(q,{}):q;},_setSort:function(_2ce,_2cf){if(this.store){this._lastCollection=null;}this.inherited(arguments);},insertRow:function(_2d0,_2d1,_2d2,i,_2d3){var _2d4=this.store,_2d5=this.dirty,id=_2d4&&_2d4.getIdentity(_2d0),_2d6;if(id in _2d5&&!(id in this._updating)){_2d6=_2d5[id];}if(_2d6){_2d0=lang.delegate(_2d0,_2d6);}return this.inherited(arguments);},updateDirty:function(id,_2d7,_2d8){var _2d9=this.dirty,_2da=_2d9[id];if(!_2da){_2da=_2d9[id]={};}_2da[_2d7]=_2d8;},setDirty:function(id,_2db,_2dc){_2bd.deprecated("setDirty(...)","use updateDirty() instead","dgrid 1.0");this.updateDirty(id,_2db,_2dc);},save:function(){var self=this,_2dd=this.store,_2de=this.dirty,dfd=new _2bf(),_2df=dfd.promise,_2e0=function(id){var data;return (self.getBeforePut||!(data=self.row(id).data))?function(){return _2dd.get(id);}:function(){return data;};};function _2e1(id,_2e2){return function(_2e3){var _2e4=self._columnsWithSet,_2e5=self._updating,key,data;for(key in _2e2){_2e3[key]=_2e2[key];}if(_2e4){for(key in _2e4){data=_2e4[key].set(_2e3);if(data!==undefined){_2e3[key]=data;}}}_2e5[id]=true;return _2bf.when(_2dd.put(_2e3),function(){delete _2de[id];delete _2e5[id];});};};for(var id in _2de){var put=_2e1(id,_2de[id]);_2df=_2df.then(_2e0(id)).then(put);}dfd.resolve();return _2df;},revert:function(){this.dirty={};this.refresh();},_trackError:function(func){var _2e6;if(typeof func=="string"){func=lang.hitch(this,func);}try{_2e6=func();}catch(err){_2c1.call(this,err);}return _2bf.when(_2e6,null,lang.hitch(this,_2c1));}});});},"epi/packaging/PackageUpload":function(){require({cache:{"url:epi/packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" dojoType=\"dijit.form.Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" dojoType=\"dijit.form.Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n"}});define("epi/packaging/PackageUpload",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/routes","epi/packaging/UploadResults","epi/packaging/SelectedFiles","epi/packaging/RestartSite","dojox/widget/Standby","epi/shell/widget/HelpButton","dojox/form/Uploader","dojox/form/uploader/plugins/IFrame","dojo/text!./templates/PackageUpload.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(dojo,_2e7,_2e8,_2e9,_2ea,_2eb,_2ec,_2ed,_2ee,_2ef,_2f0,_2f1,_2f2,_2f3,_2f4,_2f5,res){return dojo.declare("epi.packaging.PackageUpload",[_2e8,_2e9,_2ea],{res:res,successMessageClass:"successInstall",failureMessageClass:"failureInstall",templateString:_2f5,antiForgeryData:null,_uploadUrl:null,_uploader:null,_uploadResultsNode:null,_installButton:null,_clearButton:null,_fileListNode:null,_fileList:null,_uploadResults:null,_standByWidget:null,_uploaderResetRequired:false,postMixInProperties:function(){this._uploadUrl=_2ed.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Upload"});this.inherited(arguments);},startup:function(){if(this._started){return;}this._uploader=new dojox.form.Uploader({label:this.res.buttonselectpackage,multiple:true},this._uploaderInput);dojo.style(this._uploader.domNode,{width:"200px"});this._uploader.inputNodeFontSize=4;this._uploader.btnSize={w:200,h:25};this._uploaderResetRequired=true;this._uploader.startup();this._uploadType.value=this._uploader.uploadType;if(this.antiForgeryData){dojo.place(this.antiForgeryData.GetTokenNode(),this._clearButton.domNode,"after");}this._fileList=new _2ef({uploader:this._uploader},this._fileListNode);this._fileList.startup();this._standByWidget=new _2f1({target:this._fileList.listTable});document.body.appendChild(this._standByWidget.domNode);this._standByWidget.startup();dojo.connect(this._uploader,"onError",this,this._onUploaderError);dojo.connect(this._uploader,"onComplete",this,this._onUploadComplete);dojo.connect(this._uploader,"onChange",this,this._onUploadChange);dojo.connect(this._clearButton,"onClick",this,this._onClear);dojo.connect(this._installButton,"onClick",this,this._onInstall);this._disableButtons(true);this.inherited(arguments);},updateView:function(){if(this._uploaderResetRequired){this._onClear();this._uploaderResetRequired=false;}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},onSiteRestartRequired:function(){},onError:function(_2f6){},onSuccess:function(_2f7){},onModuleActionPerformed:function(){},_onClear:function(){this._uploader.reset();this._disableButtons(true);this.onModuleActionPerformed();},_onInstall:function(){this._standByWidget.show();this.onModuleActionPerformed();},_onUploaderError:function(evt){this._standByWidget.hide();this.onError([this.res.uploaderrormessage]);var _2f8=evt.headers;if(_2f8&&_2f8.indexOf("X-EPiLogOnScreen")!=-1){window.location.reload();}},_onUploadComplete:function(data){this._standByWidget.hide();this._disableButtons(true);this._showUploadResults(data);this.onSiteRestartRequired();},_onUploadChange:function(_2f9){this._standByWidget.hide();if(_2f9.length>0){this._disableButtons(false);}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},_disableButtons:function(_2fa){this._clearButton.set("disabled",_2fa);this._installButton.set("disabled",_2fa);},_showUploadResults:function(_2fb){if(this._uploadResults){this._uploadResults.destroyRecursive(false);}if(_2fb.uploadedFiles&&_2fb.uploadedFiles.length>0){var _2fc=dojo.map(_2fb.uploadedFiles,function(file,i){file.index=i+1;file.sizeStr=this._uploader.convertBytes(file.packageFileLength).value;return file;},this);var _2fd=_2fb.installationFailCount==0;if(!_2fd){var _2fe=dojo.replace(this.res.failuremessage,{count:_2fb.installationFailCount});this.onError([_2fe]);}else{var _2ff=dojo.replace(this.res.successmessage,{count:_2fb.installationSuccessCount});this.onSuccess([_2ff]);}this._uploadResults=new _2ee({files:_2fc});this._uploadResultsNode.appendChild(this._uploadResults.domNode);this._uploadResults.startup();dojo.forEach(_2fb.uploadedFiles,function(file,i){if(file.packageInfo&&file.packageInfo.id=="EPiServer.Packaging"){dojo.publish("onReloadRequired");}});}}});});},"epi/packaging/InstalledSection":function(){require({cache:{"url:epi/packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi/packaging/InstalledSection",["dojo/_base/declare","dojo/dom-geometry","dojo/text!./templates/Section.htm","dijit/_TemplatedMixin","dijit/layout/_LayoutWidget","epi/routes","epi/packaging/SectionHeader","epi/packaging/PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.InstalledSection"],function(_300,_301,_302,_303,_304,_305,_306,_307,_308){return _300("epi.packaging.InstalledSection",[_304,_303],{templateString:_302,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}var _309=new _306({webHelpAlias:"installedaddons",antiForgeryData:this.antiForgeryData,sectionTitle:_308.title},this._headerPlaceholder);var list=new _307({antiForgeryData:this.antiForgeryData,listingUrl:_305.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstalledModules"})},this._contentPlaceholder);_309.startup();list.startup();this.connect(list,"onSiteRestartRequired",function(){_309.updateView();});this.connect(list,"onError",function(_30a){_309.addErrorMessages(_30a);});this.connect(list,"onSuccess",function(_30b){_309.addSuccessMessages(_30b);});this.connect(list,"onModuleActionPerformed",function(){_309.clearErrorMessages();_309.clearSuccessMessages();});this.inherited(arguments);this._headerWidget=_309;this._listWidget=list;},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"url:epi/packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi.packaging.StatusMessageList\" class=\"epi-advancedListingError\"/></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n</div>","url:epi/packaging/templates/RestartSite.htm":"<div style=\"display: none;\" class=\"restartContainer\">\r\n    <span>${res.restartrequiredmessage}</span>\r\n    <input type=\"button\" dojoAttachPoint=\"restartButton\" dojoType=\"dijit.form.Button\" label=\"${res.restartbuttonlabel}\"/>\r\n</div>","epi/packaging/NavigationMenu":function(){require({cache:{"url:epi/packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit.DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit.MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit.MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>"}});define("epi/packaging/NavigationMenu",["dojo","dojo/hash","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/DropDownMenu","dijit/MenuItem","epi/routes","dojo/text!./templates/NavigationMenu.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Navigation","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(dojo,hash,_30c,_30d,_30e,_30f,_310,_311,_312,res,_313){return dojo.declare("epi.packaging.NavigationMenu",[_30c,_30d,_30e],{templateString:_312,antiForgeryData:"",res:res,resFeeds:_313,_viewDictionary:{"installed":"epi/packaging/InstalledSection","updates":"epi/packaging/UpdateableSection"},startup:function(){this.inherited(arguments);var _314={};this.antiForgeryData.AddAntiforgeryToken(_314);dojo.xhrPost({content:_314,url:_311.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetFeedNames"}),handleAs:"json",load:dojo.hitch(this,function(_315,_316){for(var i=0;i<_315.feeds.length;i++){var _317=this.resFeeds[_315.feeds[i].toLowerCase()];this.verticalMenu.addChild(new _310({id:_315.feeds[i],label:_317?_317.title:_315.feeds[i]}),1+i);this._viewDictionary[_315.feeds[i]]="epi/packaging/GallerySection";}var _318=dijit.byId("installed");if(dojo.hash()!=""){var page=dijit.byId(dojo.hash());if(page){_318=page;}}this.verticalMenu.onItemClick(_318);})});dojo.connect(this.verticalMenu,"onItemClick",this,function(item){this._requestChangeView(item.id);});this.subscribe("/epi/shell/action/viewchanged",dojo.hitch(this,function(type,args,data){if(data){for(var id in this._viewDictionary){if(id==data.feedName){this._selectItemById(id);return;}}}this._selectItemById(null);}));dojo.subscribe("/dojo/hashchange",this,function(_319){if(_319!=""){var item=dijit.byId(_319);if(item&&!item.selected){this.verticalMenu.onItemClick(item);}}});},_requestChangeView:function(id){var _31a=id?this._viewDictionary[id]:null;if(_31a){dojo.publish("/epi/shell/action/changeview",[_31a,null,{"feedName":id}]);}},_selectItemById:function(id){dojo.forEach(this.verticalMenu.getChildren(),function(_31b){_31b.set("selected",false);});if(id){var item=dijit.byId(id);if(item){item.set("selected",true);dojo.hash(item.id);}}}});});},"dojo/io/iframe":function(){define(["../main","require"],function(dojo,_31c){dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_31d,_31e,uri){if(window[_31d]){return window[_31d];}if(window.frames[_31d]){return window.frames[_31d];}var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){}turi=(dojo.config["dojoBlankHtmlUrl"]||_31c.toUrl("../resources/blank.html"));}var _31f=dojo.place("<iframe id=\""+_31d+"\" name=\""+_31d+"\" src=\""+turi+"\" onload=\""+_31e+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_31d]=_31f;return _31f;},setSrc:function(_320,src,_321){try{if(!_321){if(dojo.isWebKit){_320.location=src;}else{frames[_320.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_320.contentWindow.document;}else{idoc=_320.contentWindow;}if(!idoc){_320.location=src;}else{idoc.location.replace(src);}}}catch(e){}},doc:function(_322){return _322.contentDocument||(((_322.name)&&(_322.document)&&(dojo.doc.getElementsByTagName("iframe")[_322.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_322.name].contentWindow.document)))||((_322.name)&&(dojo.doc.frames[_322.name])&&(dojo.doc.frames[_322.name].document))||null;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _323=null;try{var _324=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _325=_324.handleAs;_323=ifd;if(_325!="html"){if(_325=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _326=(dii._frame.contentWindow.document).documentElement.innerText;_326=_326.replace(/>\s+</g,"><");_326=dojo.trim(_326);var _327={responseText:_326};_323=dojo._contentHandlers["xml"](_327);}}else{_323=ifd.getElementsByTagName("textarea")[0].value;if(_325=="json"){_323=dojo.fromJson(_323);}else{if(_325=="javascript"){_323=dojo.eval(_323);}}}}}catch(e){_323=e;}finally{_324._callNext();}return _323;},function(_328,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _328;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _329=dfd.ioArgs;var args=_329.args;_329._contentToClean=[];var fn=dojo.byId(args["form"]);var _32a=args["content"]||{};if(fn){if(_32a){var _32b=function(name,_32c){dojo.create("input",{type:"hidden",name:name,value:_32c},fn);_329._contentToClean.push(name);};for(var x in _32a){var val=_32a[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_32b(x,val[i]);}}else{if(!fn[x]){_32b(x,val);}else{fn[x].value=val;}}}}var _32d=fn.getAttributeNode("action");var _32e=fn.getAttributeNode("method");var _32f=fn.getAttributeNode("target");if(args["url"]){_329._originalAction=_32d?_32d.value:null;if(_32d){_32d.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_32e||!_32e.value){if(_32e){_32e.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_329._originalTarget=_32f?_32f.value:null;if(_32f){_32f.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _330=args.url+(args.url.indexOf("?")>-1?"&":"?")+_329.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_330,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _331=dfd.ioArgs;var args=_331.args;var _332=dojo.byId(args.form);if(_332){var _333=_331._contentToClean;for(var i=0;i<_333.length;i++){var key=_333[i];for(var j=0;j<_332.childNodes.length;j++){var _334=_332.childNodes[j];if(_334.name==key){dojo.destroy(_334);break;}}}if(_331["_originalAction"]){_332.setAttribute("action",_331._originalAction);}if(_331["_originalTarget"]){_332.setAttribute("target",_331._originalTarget);_332.target=_331._originalTarget;}}_331._finished=true;}};return dojo.io.iframe;});},"dojox/form/uploader/plugins/IFrame":function(){define("dojox/form/uploader/plugins/IFrame",["dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/io/iframe","dojox/form/uploader/plugins/HTML5"],function(_335,_336,lang,_337,_338,_339){var _33a=_336("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||this.force=="iframe"){this.uploadType="iframe";this.upload=this.uploadIFrame;}},uploadIFrame:function(data){var form,_33b=false;if(!this.getForm()){form=_335.place("<form enctype=\"multipart/form-data\" method=\"post\"></form>",this.domNode);_337.forEach(this._inputs,function(n,i){if(n.value){form.appendChild(n);}},this);_33b=true;}else{form=this.form;}var url=this.getUrl();var dfd=_338.send({url:url,form:form,handleAs:"json",content:data,error:lang.hitch(this,function(err){if(_33b){_335.destroy(form);}this.onError(err);}),load:lang.hitch(this,function(data,_33c,_33d){if(_33b){_335.destroy(form);}if(data["ERROR"]||data["error"]){this.onError(data);}else{this.onComplete(data);}})});}});dojox.form.addUploaderPlugin(_33a);return _33a;});},"dojox/string/Builder":function(){define("dojox/string/Builder",["dojo/_base/lang"],function(lang){lang.getObject("string",true,dojox).Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_33e){return this.append.apply(this,_33e);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_33f,_340){b=b.replace(_33f,_340);this.length=b.length;return this;};this.remove=function(_341,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_341)+b.substr(_341+len);this.length=b.length;return this;};this.insert=function(_342,str){if(_342==0){b=str+b;}else{b=b.slice(0,_342)+str+b.slice(_342);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};return dojox.string.Builder;});},"xstyle/css":function(){define("xstyle/css",["require"],function(_343){"use strict";var _344=window.cssCache||(window.cssCache={});return {load:function(_345,_346,_347,_348){var url=_346.toUrl(_345);if(_344[url]){return createStyleSheet(_344[url]);}var _349=document.documentElement;var _34a=_349.insertBefore(document.createElement("div"),_349.firstChild);_34a.id=_346.toAbsMid(_345).replace(/\//g,"-").replace(/\..*/,"")+"-loaded";var _34b=(_34a.currentStyle||getComputedStyle(_34a,null)).display;_349.removeChild(_34a);if(_34b=="none"){return _347();}_343(["./load-css"],function(load){load(url,_347);});},pluginBuilder:"xstyle/css-builder"};});},"dgrid/OnDemandList":function(){define("dgrid/OnDemandList",["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","./util/misc","put-selector/put"],function(List,_34c,_34d,lang,_34e,_34f,_350,put){return _34d([List,_34c],{minRowsPerPage:25,maxRowsPerPage:100,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:10000,rowHeight:22,queryRowsOverlap:1,pagingDelay:_350.defaultDelay,postCreate:function(){this.inherited(arguments);var self=this;_34f(this.bodyNode,"scroll",_350.throttleDelayed(function(_351){self._processScroll(_351);},null,this.pagingDelay));},renderQuery:function(_352,_353){var _354={query:_352,count:0,node:_353};if(!_353){var _355=true;var _356={node:put(this.contentNode,"div.dgrid-preload",{rowIndex:0}),count:0,query:_352,next:_354};_354.node=_353=put(this.contentNode,"div.dgrid-preload");_354.previous=_356;}_353.rowIndex=this.minRowsPerPage;var _357=this.preload;if(_357){if((_354.next=_357.next)&&this.bodyNode.scrollTop>=_357.node.offsetTop){_354.previous=_357;}else{_354.next=_357;_354.previous=_357.previous;}_354.previous.next=_354;_354.next.previous=_354;}else{this.preload=_354;}var _358=put(_353,"-div.dgrid-loading");put(_358,"div.dgrid-below",this.loadingMessage);var _359=lang.mixin(this.get("queryOptions"),{start:0,count:this.minRowsPerPage,query:_352});var _35a=_352(_359);var self=this;_34e.when(this.renderArray(_35a,_353,_359),function(trs){return _34e.when(_35a.total||_35a.length,function(_35b){put(_358,"!");var _35c=trs.length;_35b=_35b||_35c;if(!_35b){put(self.contentNode,"div.dgrid-no-data").innerHTML=self.noDataMessage;}var _35d=0;for(var i=0;i<_35c;i++){_35d+=trs[i].offsetHeight;}if(_35c&&_35d){self.rowHeight=_35d/_35c;}_35b-=_35c;_354.count=_35b;_353.rowIndex=_35c;if(_35b){_353.style.height=Math.min(_35b*self.rowHeight,self.maxEmptySpace)+"px";}else{_353.style.display="none";}self._processScroll();return trs;});});return _35a;},refresh:function(){this.inherited(arguments);if(this.store){var self=this;this._trackError(function(){return self.renderQuery(function(_35e){return self.store.query(self.query,_35e);});});}},_calcRowHeight:function(_35f){return _35f.offsetHeight;},lastScrollTop:0,_processScroll:function(){var grid=this,_360=grid.bodyNode,_361=grid.contentNode.style.webkitTransform,_362=_360.scrollTop+(_361?-_361.match(/translate[\w]*\(.*?,(.*?)px/)[1]:0),_363=_360.offsetHeight+_362,_364,_365,_366=grid.preload,_367=grid.lastScrollTop,_368=grid.bufferRows*grid.rowHeight,_369=_368-grid.rowHeight;var _36a=1;grid.lastScrollTop=_362;function _36b(_36c,_36d,_36e,_36f){var _370=grid.farOffRemoval,_365=_36c.node;if(_36d>2*_370){var row,_371=_365[_36e];var _372=0;var _373=0;var _374=[];while((row=_371)){var _375=grid._calcRowHeight(row);if(_372+_375+_370>_36d||(_371.className.indexOf("dgrid-row")<0&&_371.className.indexOf("dgrid-loading")<0)){break;}var _371=row[_36e];var _376,_377=row.observerIndex;if(_377!=_376&&_376>-1){var _378=grid.observers;var _379=_378[_376];_379&&_379.cancel();_378[_376]=0;}_372+=_375;_373+=row.count||1;_376=_377;grid.removeRow(row,true);_374.push(row);}_36c.count+=_373;if(_36f){_365.rowIndex-=_373;_37a(_36c);}else{_365.style.height=(_365.offsetHeight+_372)+"px";}var _37b=put("div");for(var i=0;i<_374.length;i++){put(_37b,_374[i]);}setTimeout(function(){put(_37b,"!");},1);}};function _37a(_37c,_37d){_37c.node.style.height=Math.min(_37c.count*grid.rowHeight,_37d?Infinity:grid.maxEmptySpace)+"px";};while(_366&&_366!=_364){_364=grid.preload;grid.preload=_366;_365=_366.node;var _37e=_365.offsetTop;var _37f;if(_363+_36a+_369<_37e){do{_366=_366.previous;}while(_366&&!_366.node.offsetWidth);}else{if(_362-_36a-_369>(_37e+(_37f=_365.offsetHeight))){do{_366=_366.next;}while(_366&&!_366.node.offsetWidth);}else{var _380=((_365.rowIndex?_362-_368:_363)-_37e)/grid.rowHeight;var _381=(_363-_362+2*_368)/grid.rowHeight;var _382=Math.max(Math.min((_362-_367)*grid.rowHeight,grid.maxRowsPerPage/2),grid.maxRowsPerPage/-2);_381+=Math.min(Math.abs(_382),10);if(_365.rowIndex==0){_380-=_381;}_380=Math.max(_380,0);if(_380<10&&_380>0&&_381+_380<grid.maxRowsPerPage){_381+=Math.max(0,_380);_380=0;}_381=Math.min(Math.max(_381,grid.minRowsPerPage),grid.maxRowsPerPage,_366.count);if(_381==0){return;}_381=Math.ceil(_381);_380=Math.min(Math.floor(_380),_366.count-_381);var _383=grid.get("queryOptions");_366.count-=_381;var _384=_365,_385,_386=grid.queryRowsOverlap,_387=_365.rowIndex>0&&_366;if(_387){var _388=_366.previous;if(_388){_36b(_388,_362-(_388.node.offsetTop+_388.node.offsetHeight),"nextSibling");if(_380>0&&_388.node==_365.previousSibling){_380=Math.min(_366.count,_380);_366.previous.count+=_380;_37a(_366.previous,true);_366.count-=_380;_365.rowIndex+=_380;_386=0;}else{_381+=_380;}}_383.start=_365.rowIndex-_386;_365.rowIndex+=_381;}else{if(_366.next){_36b(_366.next,_366.next.node.offsetTop-_363,"previousSibling",true);var _384=_365.nextSibling;if(_384==_366.next.node){_366.next.count+=_366.count-_380;_366.next.node.rowIndex=_380+_381;_366.count=_380;_386=0;}else{_385=true;}}_383.start=_366.count;}_383.count=_381+_386;if(_385){_385=_384.offsetTop;}_37a(_366);var _389=put(_384,"-div.dgrid-loading[style=height:"+_381*grid.rowHeight+"px]");put(_389,"div.dgrid-"+(_387?"below":"above"),grid.loadingMessage);_389.count=_381;_383.query=_366.query;var _38a=_366.query(_383),_38b=grid._trackError(function(){return _38a;});if(_38b===undefined){return;}(function(_38c,_38d,_38e,_38f,_390){_34e.when(grid.renderArray(_390,_38c,_383),function(){_384=_38c.nextSibling;put(_38c,"!");if(_38f&&_384){_38d.scrollTop+=_384.offsetTop-_38f;}if(_38e){_34e.when(_390.total||_390.length,function(_391){_38e.count=_391-_38e.node.rowIndex;_37a(_38e);});}});}).call(this,_389,_360,_387,_385,_38a);_366=_366.previous;}}}}});});},"epi/packaging/SectionHeader":function(){require({cache:{"url:epi/packaging/templates/SectionHeader.htm":"<div style=\"overflow: auto;\">\r\n    <div class=\"epi-listingTopContainer\" data-dojo-attach-point=\"selectTypeNode\">\r\n        <h1 data-dojo-attach-point=\"_titleNode\">\r\n            ${sectionTitle}</h1>\r\n        <div data-dojo-attach-point=\"_descriptionNode\">\r\n            ${description}</div>\r\n        <div data-dojo-attach-point=\"_restartPlaceholder\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_successMessageList\" data-dojo-type=\"epi.packaging.StatusMessageList\"\r\n            class=\"epi-packaging-validationSummary epi-packaging-Note\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_errorMessageList\" data-dojo-type=\"epi.packaging.StatusMessageList\"\r\n            class=\"epi-errorText epi-packaging-validationSummary epi-packaging-Error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-success\">\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("epi/packaging/SectionHeader",["dojo","dijit","dojo/cookie","dojo/html","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","epi/shell/widget/HelpButton","epi/packaging/StatusMessageList","epi/packaging/RestartSite","dojox/widget/Standby","dojo/text!./templates/SectionHeader.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SectionHeader"],function(dojo,_392,_393,html,_394,_395,_396,_397,_398,_399,_39a,_39b,_39c,res){return dojo.declare("epi.packaging.SectionHeader",[_394,_395,_396],{res:res,templateString:_39c,sectionTitle:null,description:null,_titleNode:null,_descriptionNode:null,webHelpAlias:null,antiForgeryData:null,_helpButtonWidget:null,_restartWidget:null,_standbyWidget:null,startup:function(){if(this._started){return;}this._helpButtonWidget=new _398({moduleName:"Shell",webHelpAlias:this.webHelpAlias},this._helpButton);this._helpButtonWidget.startup();this._restartWidget=new _39a({antiForgeryData:this.antiForgeryData},this._restartPlaceholder);this._restartWidget.startup();this.connect(this._restartWidget,"onRestartFinished",function(){var _39d=this._getStoredMessages();if(_39d){this._setReloadRequested();window.location.reload(true);}});this.connect(this._restartWidget,"onRestartCheckComplete",function(_39e){var _39f=this._getStoredMessages();if(_39f&&!_39e&&!this._isReloadRequested()){this._setReloadRequested();window.location.reload(true);}});this._standbyWidget=new _39b({target:this._standbyPlaceholder});document.body.appendChild(this._standbyWidget.domNode);this._standbyWidget.startup();dojo.subscribe("onServerError",dojo.hitch(this,this._showServerError));dojo.subscribe("onReloadRequired",dojo.hitch(this,this._storeMessages));this.inherited(arguments);},updateView:function(){html.set(this._titleNode,this.sectionTitle);html.set(this._descriptionNode,this.description);this._displayStoredMessage();this._restartWidget.showIfRestartRequired();},_isReloadRequested:function(){var _3a0=this._getItem("EPiPackagingPageReload");return _3a0==="true";},_setReloadRequested:function(){this._storeItem("EPiPackagingPageReload","true");},_clearReloadRequested:function(){this._removeItem("EPiPackagingPageReload");},_displayStoredMessage:function(){var _3a1=this._getStoredMessages();if(this._isReloadRequested()&&_3a1){this.addSuccessMessages(_3a1);this._clearReloadRequested();this._clearStoredMessages();}},_storeMessages:function(){var _3a2=this._successMessageList.messages;if(_3a2.length>0){this._storeItem("EPiPackagingStatusMessage",dojo.toJson(_3a2));}},_getStoredMessages:function(){var _3a3=this._getItem("EPiPackagingStatusMessage");if(!_3a3){return null;}if(_3a3==""){return null;}return dojo.fromJson(_3a3);},_clearStoredMessages:function(){this._removeItem("EPiPackagingStatusMessage");},_storeItem:function(key,_3a4){if(localStorage!==undefined){localStorage.setItem(key,_3a4);}else{dojo.cookie(key,_3a4);}},_getItem:function(key){var _3a5;if(localStorage!==undefined){_3a5=localStorage.getItem(key);}else{_3a5=dojo.cookie(key);}return _3a5;},_removeItem:function(key){if(localStorage!==undefined){localStorage.removeItem(key);}else{dojo.cookie(key,"",{expire:-1});}},showStandby:function(){this._standbyWidget.show();},hideStandby:function(){this._standbyWidget.hide();},addErrorMessages:function(_3a6){if(this._isReloadRequested()){return;}this._errorMessageList.addMessages(_3a6);},clearErrorMessages:function(){this._errorMessageList.clearMessages();},addSuccessMessages:function(_3a7){this._successMessageList.addMessages(_3a7);},clearSuccessMessages:function(){this._successMessageList.clearMessages();},_showServerError:function(_3a8){if(_3a8.processed){return;}if(this._isReloadRequested()){return;}_3a8.processed=true;var _3a9;try{_3a9=_3a8.xhr.getResponseHeader("X-EPiLogOnScreen");}catch(ex){}if(_3a9){window.location.reload();return;}var _3aa=_3a8.xhr.responseText;var div=dojo.byId("errorContainerDialog");if(div){dojo.destroy(div);}div=dojo.create("div",{id:"errorContainerDialog"},dojo.body());var _3ab=dojo.create("iframe",{width:"800px",height:"400px",id:"erroriframe"},div);var _3ac=new _397({title:this.res.servererror,style:"width: 820px",content:div});_3ac.show();var doc=_3ab.contentWindow.document;doc.open();doc.writeln(_3aa);doc.close();}});});},"epi/packaging/LinkButton":function(){define("epi/packaging/LinkButton",["epi","dojo","dijit","dijit/_Widget"],function(epi,dojo,_3ad,_3ae){return dojo.declare("epi.packaging.LinkButton",[_3ae],{label:"",href:"",buildRendering:function(){this.domNode=dojo.create("a",{href:this.href,"class":this["class"],innerHTML:this.label});},postCreate:function(){this.connect(this.domNode,"onclick",this._onClick);},onClick:function(e){return true;},_onClick:function(e){this.onClick(e);}});});},"dgrid/Keyboard":function(){define("dgrid/Keyboard",["dojo/_base/declare","dojo/aspect","dojo/on","./List","dojo/_base/lang","dojo/has","put-selector/put","dojo/_base/Deferred","dojo/_base/sniff"],function(_3af,_3b0,on,List,lang,has,put,_3b1){var _3b2={checkbox:1,radio:1,button:1},_3b3=/\bdgrid-cell\b/,_3b4=/\bdgrid-row\b/;has.add("dom-contains",function(){return !!document.createElement("a").contains;});function _3b5(_3b6,node){if(has("dom-contains")){return _3b6.contains(node);}else{return _3b6.compareDocumentPosition(node)&8;}};return _3af([List],{pageSkip:10,tabIndex:0,postCreate:function(){this.inherited(arguments);var grid=this;function _3b7(_3b8){var _3b9=_3b8.target;return _3b9.type&&(!_3b2[_3b9.type]||_3b8.keyCode==32);};function _3ba(_3bb){function _3bc(_3bd,_3be,_3bf){var cell=grid[grid.cellNavigation?"cell":"row"](_3bd);if(cell){_3bd=cell.element;if(_3bd){if(!_3be.bubbles){_3be.bubbles=true;}put(_3c0,"!dgrid-focus[!tabIndex]");if(_3c0){if(has("ie")<8){_3c0.style.position="";}_3be.cell=_3c0;on.emit(_3bd,"dgrid-cellfocusout",_3be);}_3c0=_3bd;_3be.cell=_3bd;if(!_3bf){if(has("ie")<8){_3bd.style.position="relative";}_3bd.tabIndex=grid.tabIndex;_3bd.focus();}put(_3bd,".dgrid-focus");on.emit(_3c0,"dgrid-cellfocusin",lang.mixin({parentType:_3be.type},_3be));}}};var _3c1=grid.cellNavigation?_3b3:_3b4,_3c0=_3bb,next;while((next=_3c0.firstChild)&&next.tagName){_3c0=next;}if(_3bb===grid.contentNode){_3b0.after(grid,"renderArray",function(ret){return _3b1.when(ret,function(ret){if(_3c1.test(_3c0.className)&&_3b5(_3bb,_3c0)){return ret;}for(var i=0,_3c2=_3bb.getElementsByTagName("*"),_3c3;(_3c3=_3c2[i]);++i){if(_3c1.test(_3c3.className)){_3c0=_3c3;break;}}_3c0.tabIndex=grid.tabIndex;return ret;});});}else{if(_3c1.test(_3c0.className)){_3c0.tabIndex=grid.tabIndex;}}on(_3bb,"mousedown",function(_3c4){if(!_3b7(_3c4)){_3bc(_3c4.target,_3c4);}});on(_3bb,"keydown",function(_3c5){if(_3c5.metaKey||_3c5.altKey){return;}var _3c6=_3c5.target;var _3c7=_3c5.keyCode;if(_3b7(_3c5)){return;}var move={32:0,33:-grid.pageSkip,34:grid.pageSkip,37:-1,38:-1,39:1,40:1,35:10000,36:-10000}[_3c7];if(isNaN(move)){return;}var _3c8,_3c9,cell=grid.cell(_3c0);var _3ca;if(_3c7==37||_3c7==39){if(!grid.cellNavigation){return;}_3ca="right";}else{_3ca="down";_3c9=cell&&cell.column&&cell.column.id;cell=grid.row(_3c0);}if(move){cell=cell&&grid[_3ca](cell,move,true);}var _3cb=cell&&cell.element;if(_3cb){if(_3c9){_3cb=grid.cell(_3cb,_3c9).element;}if(grid.cellNavigation){var _3cc=_3cb.getElementsByTagName("input");var _3cd;for(var i=0;i<_3cc.length;i++){var _3ce=_3cc[i];if((_3ce.tabIndex!=-1||"lastValue" in _3ce)&&!_3ce.disabled){if(has("ie")<8){_3ce.style.position="relative";}_3ce.focus();if(has("ie")<8){_3ce.style.position="";}_3cd=true;break;}}}_3bc(_3cb,_3c5,_3cd);}_3c5.preventDefault();});};if(grid.tabableHeader){_3ba(grid.headerNode);}_3ba(grid.contentNode);}});});}}});define("epi/packaging/packaging",[".","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI","./AntiForgeryData","./DetailedView","./GallerySection","./InstalledSection","./LinkButton","./ModulesList","./ModuleSummary","./NavigationMenu","./PackagesGrid","./PackageUpload","./RestartSite","./RootContainer","./SelectedFiles","./SiteRestartWarning","./Toolbar","./UpdateableSection","./UploadResults","./UploadSection"],function(main){return main;});