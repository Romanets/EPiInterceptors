//>>built
require({cache:{"url:epi/packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi.packaging.StatusMessageList\" class=\"epi-advancedListingError\"/></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit.form.Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n</div>"}});define("epi/packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi/packaging/DetailedView","epi/packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,res){return _1.declare("epi.packaging.ModuleSummary",[_6,_7,_8],{res:res,templateString:_10,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_2.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},destroy:function(){if(this._moduleStandby){this._moduleStandby.destroyRecursive(false);}this.inherited(arguments);},onInstall:function(_11){},onInstallError:function(_12){},onUpdate:function(_13){},onUpdateError:function(_14){},onUninstall:function(_15){},onUninstallError:function(_16){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _17=_a.toUserFriendlyHtml(this.module.installDate);var _18="Installed on "+_17+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_18;}else{_1.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_19){if(_19){this.moduleIcon.innerHTML=_4.substitute(this.iconTemplate,[_19]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){_1.style(this.InstallButton.domNode,"display","none");_1.style(this.UninstallButton.domNode,"display","none");_1.style(this.UpdateButton.domNode,"display","none");_1.style(this.updateIndicatorContainer,"display","none");if(this.module.versionInstalled){if(this.module.isInstalled){_1.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}else{_1.style(this.UpdateButton.domNode,"display","inline-block");}}else{_1.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.isSystem){_1.style(this.UninstallButton.domNode,"display","none");}},_createTags:function(){_1.forEach(this.module.tags,function(tag,i){var _1a=_1.create("span");_3.add(_1a,"epi-valueItem");this.tagList.appendChild(_1a);_1a.innerHTML=tag;},this);},_createDependencies:function(){_1.forEach(this.module.dependencies,function(_1b,i){var _1c=_1.create("span");_3.add(_1c,"epi-valueItem");this.dependenciesList.appendChild(_1c);_1c.innerHTML=_1b.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,_1.hitch(this,function(_1d){if(_1d){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,_1.hitch(this,function(_1e){if(_1e){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,_1.hitch(this,function(_1f){if(_1f){this._updateModule();}}));},_moreInfoClick:function(e){_2.stop(e);var _20=this;var _21=new _d({content:new _e({currentPackage:this.module,installHandler:_1.hitch(_21,function(){_20._showConfirmationDialog(_20.res.installconfirmation,_1.hitch(_21,function(_22){if(_22){this.hide();_20._installModule();}}));}),updateHandler:_1.hitch(_21,function(){_20._showConfirmationDialog(_20.res.updateconfirmation,_1.hitch(_21,function(_23){if(_23){this.hide();_20._updateModule();}}));}),unInstallHandler:_1.hitch(_21,function(){_20._showConfirmationDialog(_20.res.uninstallconfirmation,_1.hitch(_21,function(_24){if(_24){this.hide();_20._uninstallModule();}}));}),closeHandler:_1.hitch(_21,function(){_21.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_21.show();},_installModule:function(){this._showStandby();var _25={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_25);_1.xhrPost({content:_25,url:this.installUrl,handleAs:"json",load:_1.hitch(this,function(_26){this.module=_26;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:_1.hitch(this,function(err,_27){this._moduleStandby.hide();_1.publish("onServerError",[_27]);})});},_updateModule:function(){this._showStandby();var _28={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_28);_1.xhrPost({content:_28,url:this.updateUrl,handleAs:"json",load:_1.hitch(this,function(_29){this.module=_29;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:_1.hitch(this,function(err,_2a){this._moduleStandby.hide();_1.publish("onServerError",[_2a]);})});},_uninstallModule:function(){this._showStandby();var _2b={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_2b);_1.xhrPost({content:_2b,url:this.uninstallUrl,handleAs:"json",load:_1.hitch(this,function(_2c){this.module=_2c;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:_1.hitch(this,function(err,_2d){this._moduleStandby.hide();_1.publish("onServerError",[_2d]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _9({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_2e,_2f){var _30=new _c({description:_1.replace(_2e,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_2f});_30.show();}});});