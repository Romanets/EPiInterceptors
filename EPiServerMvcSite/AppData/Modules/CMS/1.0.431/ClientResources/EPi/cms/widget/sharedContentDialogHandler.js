//>>built
define("epi/cms/widget/sharedContentDialogHandler",["dojo/_base/Deferred","epi","epi/shell/widget/dialog/Dialog","epi/cms/widget/ContentReferences","epi/cms/widget/ContentReferencesViewModel","epi/cms/command/ReloadContent"],function(_1,_2,_3,_4,_5,_6){var _7=function(_8){var _9=new _1(),_a,_b,_c=_8.selection?_8.selection.data[0].data:_8.contentData,_d=_8.mode||_7.mode.confirm,_e=_d===_7.mode.confirm,_f=new _5({contentData:_c,showToolbar:!_e,mode:_d}),_10=new _6({model:_f});_f.update().then(function(){_a=new _3({destroyOnHide:true,defaultActionsVisible:_e,dialogClass:"epi-dialog-confirm"}),_b=new _4({model:_f,dialog:_a});if(!_e){_a.definitionConsumer.add({name:"close",label:_2.resources.action.close,settings:{type:"submit"}});}_a.connect(_a,"onExecute",function(){_10.execute();_9.resolve();});_a.connect(_a,"onCancel",_9.cancel);_a.set("content",_b);_a.show();});return _9;};_7.mode={confirm:"confirm",show:"show"};return _7;});