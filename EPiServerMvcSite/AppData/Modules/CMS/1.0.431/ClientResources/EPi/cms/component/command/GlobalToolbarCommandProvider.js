//>>built
define("epi/cms/component/command/GlobalToolbarCommandProvider",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/topic","dijit/form/ToggleButton","dijit/layout/ContentPane","epi/cms/component/ContentFilter","epi/shell/command/_Command","epi/shell/command/ToggleCommand","epi/shell/widget/ExpandoButton","epi/cms/widget/ViewSettingsExpandoButton","epi/cms/widget/VisitorGroupButton","epi/cms/widget/ChannelsButton","epi/cms/widget/command/CreateNewPageSelector","epi/cms/widget/command/CreateNewBlockSelector","epi/cms/component/command/_GlobalToolbarCommandProvider","epi/i18n!epi/cms/nls/episerver.cms.contentediting","epi/i18n!epi/cms/nls/episerver.cms.components.createblock","epi/i18n!epi/cms/nls/episerver.cms.components.createpage"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13){var _14=_1([_9],{iconClass:"epi-iconTree",tooltip:_11.toolbar.buttons.togglenavigationpane,label:_11.toolbar.buttons.togglenavigationpane,canExecute:true,constructor:function(){_4.subscribe("/epi/layout/pinnable/navigation/visibilitychanged",_3.hitch(this,function(_15){this.set("active",_15);}));},_execute:function(){_4.publish("/epi/layout/pinnable/navigation/toggle");}});var _16=_1([_9],{iconClass:"epi-iconFolder",tooltip:_11.toolbar.buttons.toggleassetspane,label:_11.toolbar.buttons.toggleassetspane,canExecute:true,constructor:function(){_4.subscribe("/epi/layout/pinnable/tools/visibilitychanged",_3.hitch(this,function(_17){this.set("active",_17);}));},_execute:function(){_4.publish("/epi/layout/pinnable/tools/toggle");}});var _18=_1([_8],{iconClass:"epi-iconEye",canExecute:true,label:_11.toolbar.buttons.viewsetting.viewsettingbutton,constructor:function(){_4.subscribe("/epi/shell/action/viewchanged",_3.hitch(this,function(_19){this.set("isAvailable",_19=="epi/cms/contentediting/PageDataController");}));}});var _1a=_1([_9],{iconClass:"epi-iconPreview",tooltip:_11.toolbar.buttons.togglepreviewmode.label,label:_11.toolbar.buttons.togglepreviewmode.label,canExecute:true,constructor:function(){_4.subscribe("/epi/layout/pinnable/navigation/visibilitychanged",_3.hitch(this,function(_1b){if(!this._isExecuting){this.set("isNavigationVisible",_1b);}}));_4.subscribe("/epi/layout/pinnable/tools/visibilitychanged",_3.hitch(this,function(_1c){if(!this._isExecuting){this.set("isAssetsVisible",_1c);}}));_4.subscribe("/epi/cms/action/disablepreview",_3.hitch(this,function(){this.set("active",false);this._restoreSidePanels();}));_4.subscribe("/epi/shell/action/viewchanged",_3.hitch(this,function(_1d){this.set("isAvailable",_1d=="epi/cms/contentediting/PageDataController");}));},_restoreSidePanels:function(){_4.publish("/epi/layout/pinnable/navigation/toggle",this.active?false:this.isNavigationVisible);_4.publish("/epi/layout/pinnable/tools/toggle",this.active?false:this.isAssetsVisible);},_execute:function(){this._isExecuting=true;this.set("active",!this.active);this._restoreSidePanels();if(this.active){_4.publish("/epi/cms/action/displaypreview");}else{_4.publish("/epi/cms/action/switcheditmode",[true]);}this._isExecuting=false;}});var _1e=_1([_e],{order:10,iconClass:"epi-iconPage",label:_13.command.label});return _1([_10],{constructor:function(){this.addToLeading(new _14(),{widget:_5,"class":"epi-leadingToggleButton epi-mediumButton"});this.addCommand(new _1e(),{category:"create"});this.addCommand(new _f({order:20,iconClass:"epi-iconSharedBlock",label:_12.command.label}),{category:"create"});this.addCommand(new _18(),{widget:_b,showInGroup:true,buttons:[new _c(),new _d()],category:"view"});this.addCommand(new _1a(),{widget:_a,showInGroup:true,hasToggleableChildren:false,buttons:[new _6({iconClass:"",content:"<span>"+_11.toolbar.buttons.togglepreviewmode.message+"</span>"})],category:"view"});this.addToTrailing(new _16(),{widget:_5,"class":"epi-trailingToggleButton epi-mediumButton"});}});});