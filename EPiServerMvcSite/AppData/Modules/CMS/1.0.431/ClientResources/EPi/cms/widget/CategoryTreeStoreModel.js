//>>built
define("epi/cms/widget/CategoryTreeStoreModel",["dojo","epi/dependency","epi/routes"],function(_1,_2,_3){return _1.declare("epi.cms.widget.CategoryTreeStoreModel",null,{store:null,rootCategory:undefined,constructor:function(_4){_1.mixin(this,_4);if(!this.rootCategory){var _5=_2.resolve("epi.cms.Application");this.rootCategory=_5.getRootCategory();}if(!this.store){var _6=_2.resolve("epi.storeregistry");this.store=_6.get("epi.cms.category");}},getRoot:function(_7){_1.when(this.store.get(this.rootCategory),_7);},mayHaveChildren:function(_8){return _8.hasChildren;},getChildren:function(_9,_a){var id=this.getIdentity(_9),_b=this.store.query({id:id,query:"getchildren"});_b.then(function(_c){_9.children=_c;_a(_c);});},getIdentity:function(_d){return this.store.getIdentity(_d);},getLabel:function(_e){return _e.description;}});});