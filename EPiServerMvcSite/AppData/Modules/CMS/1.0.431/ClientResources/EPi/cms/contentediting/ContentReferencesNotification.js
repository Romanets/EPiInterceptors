//>>built
define("epi/cms/contentediting/ContentReferencesNotification",["dojo/_base/declare","dojo/_base/lang","dojo/dom-construct","dojo/Stateful","dojo/on","epi/cms/widget/sharedContentDialogHandler","epi/dependency","epi/i18n!epi/cms/nls/episerver.cms.contentediting.notificationbar","epi/cms/command/BackCommand"],function(_1,_2,_3,_4,on,_5,_6,_7,_8){return _1("epi.cms.contentediting.ContentReferencesNotification",[_4],{contentData:null,notification:null,_referencesStore:null,_resources:_7,_command:null,constructor:function(){this.inherited(arguments);this._command=new _8();var _9=_6.resolve("epi.storeregistry");this._referencesStore=_9.get("epi.cms.contentreferences");},set:function(_a,_b){if(_a==="contentData"&&_b.capabilities.isBlock){dojo.when(this._referencesStore.refresh(_b.contentLink),dojo.hitch(this,"_referencesLoaded"));}this.inherited(arguments);},_referencesLoaded:function(_c){var _d=0;var _e=0;dojo.forEach(_c,function(_f){if(_f.isPage){_d++;}if(_f.isBlock){_e++;}});var _10=_3.create("div",{innerHTML:this._resources.sharedblock+" "});if(_d>0||_e>0){_10.innerHTML+=this._resources.affect;var _11="";if(_d>0){_11+=_d+" "+(_d>1?this._resources.pages:this._resources.page);}if(_d>0&&_e>0){_11+=" "+this._resources.and+" ";}if(_e>0){_11+=_e+" "+(_e>1?this._resources.blocks:this._resources.block);}var _12=_3.create("a",{href:"#",innerHTML:_11,title:this._resources.referencestooltip},_10);on(_12,"click",_2.hitch(this,function(e){dojo.stopEvent(e);this._showBlockReferenceDialog();}));}this._command.set("model",{});this.set("notification",{content:_10,commands:[this._command]});},_showBlockReferenceDialog:function(){_5({contentData:this.contentData,showToolbar:true,mode:_5.mode.show});}});});