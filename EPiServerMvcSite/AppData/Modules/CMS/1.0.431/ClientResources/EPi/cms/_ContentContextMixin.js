//>>built
define("epi/cms/_ContentContextMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/connect","epi/dependency","epi/shell/_ContextMixin"],function(_1,_2,_3,_4,_5,_6){return _1("epi.cms._ContentContextMixin",[_6],{_currentContentContext:null,_contentDataStore:null,constructor:function(){var _7=_5.resolve("epi.storeregistry");this._contentDataStore=_7.get("epi.cms.contentdata");_4.connect(this._contentDataStore,"onItemChanged",this,"itemChanged");},getCurrentContent:function(){var _8=new _2();_2.when(this.getCurrentContext(),_3.hitch(this,function(_9){if(_9.type!=="epi.cms.contentdata"){_8.reject({message:"Not a content data",context:_9});return;}_2.when(this._contentDataStore.query({id:_9.id}),function(_a){_8.resolve(_a);});}));return _8;},contextChanged:function(_b,_c){this.inherited(arguments);if(!_b||_b.type!=="epi.cms.contentdata"){this._currentContentContext=null;return;}var _d=(_c&&_c.forceContextChange?_c.forceContextChange:false);if(!_d&&this._currentContentContext&&this._currentContentContext.id===_b.id){return;}this._currentContentContext=_b;this.contentContextChanged(_b,_c);},contextUpdated:function(_e,_f){if(!_e||_e.type!=="epi.cms.contentdata"){this._currentContentContext=null;return;}this._currentContentContext=_e;this.contentContextUpdated(_e,_f);},contentContextChanged:function(ctx,_10){},contentContextUpdated:function(ctx,_11){},itemChanged:function(id,_12){}});});