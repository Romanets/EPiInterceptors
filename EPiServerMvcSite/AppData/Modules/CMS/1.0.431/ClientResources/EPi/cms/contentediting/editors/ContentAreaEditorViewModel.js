//>>built
define("epi/cms/contentediting/editors/ContentAreaEditorViewModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/topic","dojo/Stateful","epi/shell/command/_CommandProviderMixin","epi/cms/contentediting/command/BlockRemove","epi/cms/contentediting/command/BlockEdit","epi/cms/contentediting/command/BlockMoveUp","epi/cms/contentediting/command/BlockMoveDown"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _2("epi.cms.contentediting.editors.ContentAreaEditorViewModel",[_5,_6],{selectedItem:null,_childItems:null,isTop:false,isBottom:false,constructor:function(){this._childItems=[];this._setupCommands();},onChildrenChange:function(){},find:function(){return this._childItems;},add:function(_b){this._childItems.push(_b);},getItemByIndex:function(_c){return this._childItems[_c];},getItemIndex:function(_d){return _1.indexOf(this._childItems,_d);},getNext:function(_e){var _f=_1.indexOf(this._childItems,_e);if(_f<this._childItems.length-1){return this._childItems[_f+1];}return null;},getPrev:function(_10){var _11=_1.indexOf(this._childItems,_10);if(_11>0){return this._childItems[_11-1];}return null;},clear:function(){for(var i=this._childItems.length-1;i>=0;i--){delete this._childItems[i];}this._childItems=[];},swap:function(_12,_13){var _14=_1.indexOf(this._childItems,_12);var _15=_1.indexOf(this._childItems,_13);if(_14>=0&&_15>=0){this._childItems[_14]=_13;this._childItems[_15]=_12;_14=_12.index;_12.index=_13.index;_13.index=_14;}},move:function(_16,_17){var _18=this._childItems[_17];if(_18){this.swap(_16,_18);}},getValue:function(){var _19=_1.map(this._childItems,function(_1a){return _1a.getValue();},this);return _19;},setSelectedItem:function(_1b){this.selectedItem=_1b;this.isTop=(this.selectedItem.index===0);this.isBottom=(this.selectedItem.index==this._childItems.length-1);this.updateCommandModel(this);},resetItemIndex:function(){_1.forEach(this._childItems,function(_1c,_1d){_1c.isTop=false;_1c.isBottom=false;_1c.index=_1d;});if(this.selectedItem){this.isTop=(this.selectedItem.index===0);this.isBottom=(this.selectedItem.index==this._childItems.length-1);}},edit:function(){if(this.selectedItem){var _1e=this.selectedItem.contentLink;var _1f={uri:"epi.cms.contentdata:///"+_1e};_4.publish("/epi/shell/context/request",_1f,{});}},remove:function(_20){var _21=_20||this.selectedItem;if(_21){var _22=_1.indexOf(this._childItems,_21);if(_22>=0){this._childItems.splice(_22,1);}this.onChildrenChange();}},moveUp:function(){this.swap(this.selectedItem,this.getItemByIndex(this.selectedItem.index-1));this.onChildrenChange();},moveDown:function(){this.swap(this.selectedItem,this.getItemByIndex(this.selectedItem.index+1));this.onChildrenChange();},_setupCommands:function(){this.set("commands",[new _8(),new _9(),new _a(),new _7()]);}});});