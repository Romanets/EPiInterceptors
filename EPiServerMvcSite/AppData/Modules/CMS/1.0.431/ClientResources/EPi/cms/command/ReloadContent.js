//>>built
define("epi/cms/command/ReloadContent",["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/topic","epi/cms/core/ContentReference","epi/dependency","epi/UriParser","epi/shell/_HierarchicalModelMixin","epi/shell/command/_Command"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_a,_9],{forceReloadCurrentContent:false,constructor:function(){var _b=_7.resolve("epi.storeregistry");this.store=_b.get("epi.cms.content.light");this._application=_7.resolve("epi.cms.Application");this._hashWrapper=_7.resolve("epi.shell.HashWrapper");this.set("canExecute",this.forceReloadCurrentContent);},_execute:function(){var _c=this,_d,_e=new _8(_c._hashWrapper.getHash().context),_f=new _6(_e.getId()),_10=_f.id,_11=_c._application.getStartPage();if(_c.forceReloadCurrentContent===true){_d=_10;}else{if(_f.providerName.length===0){if(_10==_c.model.contentData.contentLink){_d=_11;}else{var _12=_c.model.get("pageReferences").concat(_c.model.get("blockReferences"));_2.some(_12,function(ref,_13){if(_10==ref.ownerID){_d=ref.ownerID;return true;}});if(!_d){_c.getAncestors(_10,function(_14){_2.some(_14,function(_15,_16){if(_c.model.contentData.contentLink==_15.contentLink){_d=_11;return true;}});});}}}else{if(_f.toString()==_c.model.contentData.contentLink){_d=_11;}}}if(_d){var _17={uri:"epi.cms.contentdata:///"+_d},_18=_d==_11,_19=_18?{sender:this,forceContextChange:true}:{sender:this,forceContextChange:true,trigger:"internal"};_5.publish("/epi/shell/context/request",_17,_19);}},_onModelChange:function(){var _1a=(this.model!=null)||this.forceReloadCurrentContent;this.set("canExecute",!!_1a);}});});