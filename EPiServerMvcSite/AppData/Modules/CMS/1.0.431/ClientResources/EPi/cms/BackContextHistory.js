//>>built
define("epi/cms/BackContextHistory",["dojo/_base/declare","dojo/_base/lang","dojo/store/Memory","epi/shell/ContextHistory"],function(_1,_2,_3,_4){return _1("epi.cms.BackContextHistory",[_4],{createStoreItem:function(){var _5=this.inherited(arguments);_2.mixin(_5,{index:this.store.data.length});return _5;},createStore:function(){return new _3({data:[],idProperty:"index"});},onContextChanged:function(_6,_7,_8){if(_7&&_7.trigger==="back"){this._removeLastItem();return;}this.inherited(arguments);},getPrevious:function(){var _9=this.store.query({},{count:2,sort:[{attribute:"dateAdded",descending:true}]});return (_9&&_9.length>1)?_9[1]:null;},_removeLastItem:function(){if(this.store.data&&this.store.data.length>0){var _a=this.store.data[this.store.data.length-1].index;this.store.remove(_a);}}});});