//>>built
define("epi/cms/widget/ContentSelectorDialog",["dojo","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/aspect","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/Button","epi","epi/cms/widget/ContentTree","epi/cms/core/ContentReference","epi/shell/widget/_ActionProviderWidget","epi/i18n!epi/cms/nls/episerver.cms.widget.contentselectordialog"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){return _1.declare("epi.cms.widget.ContentSelectorDialog",[_7,_8,_9,_e],{_contentRef:null,res:_f,root:null,typeIdentifiers:null,showButtons:true,model:null,showRoot:true,expandSubRoot:false,canSelectOwnerContent:true,templateString:"<div><div data-dojo-attach-point=\"_treeNode\"></div></div>",buildRendering:function(){this.inherited(arguments);this.tree=new _c({root:this.root,typeIdentifiers:this.typeIdentifiers,allowManipulation:false,model:this.model,showRoot:this.showRoot},this._treeNode);if(this.expandSubRoot){var _10=this.connect(this.tree,"onLoad",_2.hitch(this,function(){var _11=this.tree.model;if(this.tree.rootNode){_4.forEach(this.tree.rootNode.getChildren(),function(_12){if(_11.mayHaveChildren(_12.item)){this.tree._expandNode(_12);}},this);}_3.disconnect(_10);}));}this.connect(this.tree,"onClick","_onTreeNodeClick");},_setValueAttr:function(_13){if(_13){this._contentRef=_13;var _14=this._contentRef==="-"?null:this._contentRef;_5.after(this.tree,"onLoad",_2.hitch(this,function(){this.tree.selectContent(_14);}));}else{this._contentRef=null;_5.after(this.tree,"onLoad",_2.hitch(this,function(){this.tree.selectContent();}));}},_getValueAttr:function(){this.inherited(arguments);if(this._contentRef){return this._contentRef.toString();}else{return "";}},getActions:function(){return this.canSelectOwnerContent?[{name:"selectpage",label:_f.currentpage,settings:{type:"submit"},action:_1.hitch(this,function(){this._setValueOwnerContent();})}]:[];},_onTreeNodeClick:function(_15){this.set("value",_15.contentLink);this.onChange(this.get("value"));},_setValueOwnerContent:function(){this.set("value","-");},onChange:function(_16){},focus:function(){this.tree.focus();}});});