//>>built
define("epi/cms/widget/ContentSearchBox",["dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/aspect","dojo/Evented","dojo/keys","dojo/dom-attr","dojo/dom-style","epi/shell/widget/SuggestionBox","epi/cms/widget/SearchResultList"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1("epi.cms.widget.ContentSearchBox",[_9,_5],{autoComplete:false,dropDownClass:_a,queryExpr:"${0}",minimumNumberOfChar:1,postCreate:function(){this.inherited(arguments);this.searchDelay=this.defaultDelay;this.on("beforeSearch",_2.hitch(this,function(){if(this.dropDown){_8.set(this.dropDown.domNode,"width",this.textbox.clientWidth+"px");this.dropDown.showStandby(true);this._showResultList();}}));this.on("searchComplete",_2.hitch(this,function(_b){if(this.dropDown){this.dropDown.showStandby(false);}}));_4.before(this,"_startSearch",function(_c,_d){if(!this.dropDown){var _e=_2.hitch(this,function(){var _f=this.id+"_popup",_10=_2.isString(this.dropDownClass)?_2.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _10({onChange:_2.hitch(this,this._selectOption),id:_f,dir:this.dir,textDir:this.textDir});_7.remove(this.textbox,"aria-activedescendant");_7.set(this.textbox,"area-owns",_f);});_e();this.dropDown.on("select",_2.hitch(this,function(_11){this.emit("select",_11);}));}this.emit("beforeSearch",{});return [_c,_d];});},_openResultList:function(_12,_13,_14){this.emit("searchComplete",_12);this._fetchHandle=null;this.dropDown.clearResultList();var _15=_12.length>0||_14.start!==0;this.dropDown.showEmptyMessage(!_15);this.dropDown.showGrid(_15);if(_15){this.dropDown.createOptions(_12,_14,_2.hitch(this,"_getMenuLabelFromItem"));}this._showResultList();},_onDropDownMouseDown:function(e){e.stopPropagation();},_onKey:function(evt){switch(evt.charOrCode){case _6.ENTER:if(this._opened||this._fetchHandle){this.inherited(arguments);}else{this._startSearchFromInput();_3.stop(evt);}break;case _6.PAGE_DOWN:case _6.DOWN_ARROW:case _6.PAGE_UP:case _6.UP_ARROW:this.dropDown.handleKey(evt);_3.stop(evt);break;case _6.LEFT_ARROW:case _6.RIGHT_ARROW:break;default:this.inherited(arguments);}},_startSearchFromInput:function(){if(!this.focusNode.value||this.focusNode.value.length<this.minimumNumberOfChar){this.closeDropDown();}else{this._startSearch(this.focusNode.value);}},_startSearchAll:function(){},_selectOption:function(_16){this.closeDropDown();}});});