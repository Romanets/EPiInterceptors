//>>built
define("epi/cms/contentediting/command/Publish",["dojo/_base/declare","dojo/_base/Deferred","epi/shell/command/_Command","epi/cms/core/ContentReference","epi/cms/contentediting/ContentActionSupport","epi/cms/contentediting/command/_ChangeContentStatus","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons"],function(_1,_2,_3,_4,_5,_6,_7){return _1("epi.cms.contentediting.command.Publish",[_6],{name:"publish",label:_7.publish.label,executingLabel:_7.publish.executinglabel,tooltip:_7.publish.title,action:_5.action.Publish,_execute:function(){var _8=new _2();_2.when(this.inherited(arguments),function(_9){var _a=new _4(_9.oldId).createVersionUnspecificReference().toString();dojo.publish("/epi/cms/contentdata/childrenchanged",_a);_8.resolve();},function(){_8.cancel();});return _8;},_onModelChange:function(){this.inherited(arguments);var _b=this.model.contentData,_c=_b.status,_d=this.model.canChangeContent(_5.action.Publish),_e=_d&&!(_c===_5.versionStatus.Published&&!_b.isCommonDraft),_f=null;switch(_c){case _5.versionStatus.CheckedIn:_f=_7.approveandpublish;break;case _5.versionStatus.PreviouslyPublished:_f=_7.republish;break;case _5.versionStatus.CheckedOut:if(_b.isMasterVersion){_f=_7.publish;}else{_f=_7.publishchanges;}break;default:_f=_7.publishchanges;}this.set("label",_f.label);this.set("title",_f.title);this.set("executingLabel",_f.executinglabel);this.set("canExecute",_e);this.set("isAvailable",_d);}});});