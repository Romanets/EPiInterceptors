//>>built
define("epi/cms/contentediting/command/ScheduleForPublish",["dojo/_base/declare","dojo/aspect","dojo/on","dojo/topic","epi/shell/widget/dialog/Dialog","epi/cms/contentediting/command/_ContentCommandBase","epi/cms/contentediting/ContentActionSupport","epi/cms/contentediting/ScheduledPublishSelector","epi/cms/contentediting/ScheduledPublishSelectorViewModel","epi/i18n!epi/cms/nls/episerver.cms.contentediting.toolbar.buttons","epi/i18n!epi/cms/nls/episerver.cms.widget.scheduledpublishselector"],function(_1,_2,on,_3,_4,_5,_6,_7,_8,_9,_a){return _1("epi.cms.contentediting.command.ScheduleForPublish",[_5],{name:"reject",label:_9.scheduleforpublish.label,tooltip:_9.scheduleforpublish.title,iconClass:"epi-iconClock",_execute:function(){var _b=new _8();_b.set("contentData",this.model.contentData);var _c=new _7({model:_b});var _d=_6.saveAction;var _e=this;var _f=new _4({content:_c,title:_a.title,defaultActionsVisible:false});on(_f,"execute",function(){_e.model.setProperty("iversionable_startpublish",_b.dateValue);var _10=_d.CheckIn|_d.DelayedPublish|_d.ForceCurrentVersion;dojo.when(_e.model.changeContentStatus(_10),function(_11){_e._requestContextChange(_11.id,true);});});_f.show(true);_2.after(_f,"_onSubmit",function(){_3.publish("/epi/cms/action/disableundoredoactions");});},_onModelChange:function(){this.inherited(arguments);var _12=this.model.contentData,_13=(_12.status===_6.versionStatus.CheckedOut)||(_12.status===_6.versionStatus.Rejected)||(_12.status===_6.versionStatus.Published&&_12.isCommonDraft),_14=_13&&this.model.canChangeContent(_6.action.Publish);this.set("canExecute",_14);this.set("isAvailable",_13);},_requestContextChange:function(id,_15){var _16={uri:"epi.cms.contentdata:///"+id};var _17={sender:this,trigger:"internal",forceContextChange:_15};dojo.publish("/epi/shell/context/request",[_16,_17]);}});});