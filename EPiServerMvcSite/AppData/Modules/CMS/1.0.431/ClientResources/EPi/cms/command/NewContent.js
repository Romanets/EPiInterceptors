//>>built
define("epi/cms/command/NewContent",["dojo/_base/declare","dojo/topic","epi/dependency","epi/cms/contentediting/ContentActionSupport","epi/shell/command/_Command"],function(_1,_2,_3,_4,_5){return _1([_5],{contentType:null,resources:null,contextStore:null,contentActionSupport:null,postscript:function(){this.inherited(arguments);this.contentActionSupport=this.contentActionSupport||_4;if(!this.contextStore){var _6=_3.resolve("epi.storeregistry");this.contextStore=_6.get("epi.shell.context");}},_execute:function(){_2.publish("/epi/shell/action/changeview","epi/cms/component/CreateContent",null,{requestedTypes:[this.contentType],type:this.contentType,parent:this.model,res:this.resources});},_onModelChange:function(){if(this.model==null){this.set("canExecute",false);return;}dojo.when(this.contextStore.get("?uri=epi.cms.contentdata:///"+this.model.contentLink),dojo.hitch(this,function(_7){if(!_7){return;}var _8=this.model;var _9=_7.languageContext;var _a=!_9||(_9.hasTranslationAccess&&_9.isPreferredLanguageAvailable);var _b=_8&&!(_8.isWastebasket||_8.isDeleted)&&_a&&this.contentActionSupport.isActionAvailable(_8,_4.action.Create,_4.providerCapabilities.Create,true);this.set("canExecute",_b);}));}});});