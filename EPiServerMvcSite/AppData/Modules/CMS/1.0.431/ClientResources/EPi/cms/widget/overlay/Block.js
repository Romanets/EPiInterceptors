//>>built
require({cache:{"url:epi/cms/widget/templates/Block.html":"<div class=\"dojoDndItem epi-overlay-block\">\r\n    <div data-dojo-attach-point=\"containerDomNode\"></div>\r\n    <button data-dojo-attach-point=\"settingsButton\" data-dojo-type=\"dijit.form.DropDownButton\" \r\n        data-dojo-props=\"showLabel:false, title:'${res.settingstooltip}', iconClass:'epi-iconContextMenu', 'class':'epi-chromelessButton epi-overlayControls epi-settingsButton epi-mediumButton'\">\r\n        <div data-dojo-attach-point=\"contextMenu\" data-dojo-type=\"epi.cms.widget.BlockContextMenu\"></div>\r\n    </button>\r\n</div>"}});define("epi/cms/widget/overlay/Block",["dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/form/DropDownButton","epi","epi/shell/widget/overlay/_Base","epi/cms/widget/overlay/_OverlayItemInfoMixin","epi/cms/widget/BlockContextMenu","epi/i18n!epi/cms/nls/episerver.cms.widget.blockcontextmenu","dojo/text!../templates/Block.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){return _1("epi.cms.widget.overlay.Block",[_c,_8,_9,_d],{templateString:_10,actionResources:_b.resources.action,headerResources:_b.resources.header,res:_f,_setMissingRendererAttr:function(val){_4.toggle(this.domNode,"epi-overlay-item-missing-renderer",val);},_getIsTopAttr:function(){var _11=this.domNode.previousSibling;return !_11||!/epi-overlay-block/.test(_11.className);},_getIsBottomAttr:function(){var _12=this.domNode.nextSibling;return !_12||!/epi-overlay-block/.test(_12.className);},postCreate:function(){this.inherited(arguments);this._injectDynamicStyles();this.model.set("contentLink",this.contentLink);this._setupContextMenu();if(this.blockInfo&&"missingrenderer" in this.blockInfo){this.set("missingRenderer",this.blockInfo.missingrenderer);}this.connect(this.domNode,"click",this._onClick);},_injectDynamicStyles:function(){/inline|inline-block/.test(_7.get(this.sourceItemNode,"display"))?_4.add(this.sourceItemNode,"epi-injected-minSize-inline"):_4.add(this.sourceItemNode,"epi-injected-minSize");},moveUp:function(){this.onChange(this,"moveUp");},moveDown:function(){this.onChange(this,"moveDown");},remove:function(){this.onChange(this,"remove");},edit:function(){this.onChange(this,"edit");},onChange:function(_13,_14){},onClick:function(_15,e){},_onClick:function(e){var _16=dijit.getEnclosingWidget(e.originalTarget||e.target);dojo.stopEvent(e);if(_16&&_16.isInstanceOf(_a)){return;}this.onClick(this,e);},_setupContextMenu:function(){if(this.settingsButton.dropDownPosition){this.settingsButton.dropDownPosition=["above-alt","below-alt"];}if(!this.settingsButton.dropDown){this.settingsButton.dropDown=this.contextMenu;}this.connect(this.contextMenu,"onOpen","_onContextMenuOpen");},_onContextMenuOpen:function(){this.contextMenu.set("model",this);}});});